{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap d0b8280c0e008abe1479","webpack:///external \"React\"","webpack:///external \"_\"","webpack:///./src/Common.ts","webpack:///./src/BaseEntity.ts","webpack:///./src/DiagramModel.ts","webpack:///./src/defaults/DefaultLinkWidget.ts","webpack:///./src/defaults/DefaultNodeWidget.ts","webpack:///./src/Toolkit.ts","webpack:///./src/WidgetFactories.ts","webpack:///./src/DiagramEngine.ts","webpack:///./src/defaults/DefaultLinkFactory.ts","webpack:///./src/defaults/DefaultNodeFactory.ts","webpack:///./src/widgets/DiagramWidget.ts","webpack:///./src/widgets/LinkLayerWidget.ts","webpack:///./src/widgets/LinkWidget.ts","webpack:///./src/widgets/NodeLayerWidget.ts","webpack:///./src/widgets/NodeWidget.ts","webpack:///./src/widgets/PortWidget.ts","webpack:///./src/main.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"React\"), require(\"_\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"React\", \"_\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"storm-react-diagrams\"] = factory(require(\"React\"), require(\"_\"));\n\telse\n\t\troot[\"storm-react-diagrams\"] = factory(root[\"React\"], root[\"_\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 18);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d0b8280c0e008abe1479","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"React\"\n// module id = 0\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"_\"\n// module id = 1\n// module chunks = 0","import {Toolkit} from \"./Toolkit\";\nimport {BaseEnity, BaseListener} from \"./BaseEntity\";\nimport * as _ from \"lodash\";\n\nexport interface BaseModelListener extends BaseListener{\n\t\n\tselectionChanged?();\n\t\n\tentityRemoved?();\n}\n\n/**\n * @author Dylan Vorster\n */\nexport class BaseModel extends BaseEnity<BaseModelListener>{\n\t\n\tselected: boolean;\n\t\n\tconstructor(){\n\t\tsuper();\n\t\tthis.id = Toolkit.UID();\n\t\tthis.selected = false;\n\t}\n\t\n\tpublic getID(): string{\n\t\treturn this.id\n\t}\n\t\n\tpublic isSelected(): boolean{\n\t\treturn this.selected;\n\t}\n\t\n\tpublic setSelected(selected: boolean){\n\t\tthis.selected = selected;\n\t\tthis.itterateListeners((listener) => {\n\t\t\tif(listener.selectionChanged){\n\t\t\t\tlistener.selectionChanged();\n\t\t\t}\n\t\t});\n\t}\n\t\n\tremove(){\n\t\tconsole.log(\"removing: \",this);\n\t\tthis.itterateListeners((listener) => {\n\t\t\tif(listener.entityRemoved){\n\t\t\t\tlistener.entityRemoved();\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport class PointModel extends BaseModel{\n\t\n\tx:number;\n\ty:number;\n\tlink: LinkModel;\n\t\n\tconstructor(link: LinkModel,points: {x:number,y: number}){\n\t\tsuper();\n\t\tthis.x = points.x;\n\t\tthis.y = points.y;\n\t\tthis.link = link;\n\t}\n\t\n\tremove(){\n\t\tsuper.remove();\n\t\t\n\t\t//clear references\n\t\tif (this.link){\n\t\t\tthis.link.removePoint(this);\n\t\t}\n\t}\n\t\n\tupdateLocation(points: {x:number,y: number}){\n\t\tthis.x = points.x;\n\t\tthis.y = points.y;\n\t}\n\t\n\tgetX():number{\n\t\treturn this.x;\n\t}\n\t\n\tgetY():number{\n\t\treturn this.y;\n\t}\n\t\n\tgetLink(): LinkModel{\n\t\treturn this.link;\n\t}\n}\n\nexport class LinkModel extends BaseModel{\n\t\n\tlinkType: string;\n\tsourcePort: PortModel|null;\n\ttargetPort: PortModel|null;\n\tpoints: PointModel[];\n\textras: {};\n\t\n\tconstructor(){\n\t\tsuper();\n\t\tthis.linkType = 'default';\n\t\tthis.points = [\n\t\t\tnew PointModel(this,{x: 0,y: 0}),\n\t\t\tnew PointModel(this,{x: 0,y: 0}),\n\t\t];\n\t\tthis.extras = {};\n\t\tthis.sourcePort = null;\n\t\tthis.targetPort = null;\n\t}\n\t\n\tremove(){\n\t\tsuper.remove();\n\t\tif (this.sourcePort){\n\t\t\tthis.sourcePort.removeLink(this);\n\t\t}\n\t\tif (this.targetPort){\n\t\t\tthis.targetPort.removeLink(this);\n\t\t}\n\t}\n\t\n\tisLastPoint(point: PointModel){\n\t\tvar index = this.getPointIndex(point);\n\t\treturn index === this.points.length-1;\n\t}\n\t\n\tgetPointIndex(point: PointModel){\n\t\treturn this.points.indexOf(point);\n\t}\n\t\n\tgetPointModel(id: string): PointModel|null{\n\t\tfor (var i = 0; i < this.points.length;i++){\n\t\t\tif (this.points[i].id === id){\n\t\t\t\treturn this.points[i];\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\t\n\tgetFirstPoint(): PointModel{\n\t\treturn this.points[0];\n\t}\n\t\n\tgetLastPoint(): PointModel{\n\t\treturn this.points[this.points.length-1];\n\t}\n\t\n\tsetSourcePort(port: PortModel){\n\t\tport.addLink(this);\n\t\tthis.sourcePort = port;\n\t}\n\t\n\tgetSourcePort(): PortModel{\n\t\treturn this.sourcePort;\n\t}\n\t\n\tgetTargetPort(): PortModel{\n\t\treturn this.targetPort;\n\t}\n\t\n\tsetTargetPort(port: PortModel){\n\t\tport.addLink(this);\n\t\tthis.targetPort = port;\n\t}\n\t\n\tgetPoints(): PointModel[]{\n\t\treturn this.points;\n\t}\n\t\n\tsetPoints(points: PointModel[]){\n\t\tthis.points = points;\n\t}\n\t\n\tremovePoint(pointModel: PointModel){\n\t\tthis.points.splice(this.getPointIndex(pointModel),1);\n\t}\n\t\n\taddPoint(pointModel:PointModel,index = 1){\n\t\tthis.points.splice(index,0,pointModel);\n\t}\n\t\n\tgetType(): string{\n\t\treturn this.linkType;\n\t}\n}\n\nexport class PortModel extends BaseModel{\n\t\n\tname: string;\n\tparentNode: NodeModel;\n\tlinks: {[id: string]: LinkModel};\n\t\n\tconstructor(name: string){\n\t\tsuper();\n\t\tthis.name = name;\n\t\tthis.links = {};\n\t\tthis.parentNode = null;\n\t}\n\t\n\tgetName(): string{\n\t\treturn this.name;\n\t}\n\t\n\tgetParent(): NodeModel{\n\t\treturn this.parentNode;\n\t}\n\t\n\tsetParentNode(node: NodeModel){\n\t\tthis.parentNode = node;\n\t}\n\t\n\tremoveLink(link: LinkModel){\n\t\tdelete this.links[link.getID()];\n\t}\n\t\n\taddLink(link: LinkModel){\n\t\tthis.links[link.getID()] = link;\n\t}\n\t\n\tgetLinks(): {[id: string]: LinkModel}{\n\t\treturn this.links;\n\t}\n}\n\nexport class NodeModel extends BaseModel{\n\t\n\tnodeType: string;\n\tcanDelete: boolean;\n\tx: number;\n\ty: number;\n\textras: {};\n\tports:  {[s: string]:PortModel};\n\t\n\tconstructor(){\n\t\tsuper();\n\t\tthis.canDelete = true;\n\t\tthis.nodeType = \"default\";\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t\tthis.extras = {};\n\t\tthis.ports = {};\n\t}\n\t\n\tremove(){\n\t\tsuper.remove();\n\t\tfor (var i in this.ports){\n\t\t\t_.forEach(this.ports[i].getLinks(),(link) => {\n\t\t\t\tlink.remove();\n\t\t\t});\n\t\t}\n\t}\n\t\n\tgetPort(name: string): PortModel | null{\n\t\treturn this.ports[name];\n\t}\n\t\n\tgetPorts(): {[s: string]:PortModel}{\n\t\treturn this.ports;\n\t}\n\t\n\tremovePort(port: PortModel){\n\t\t//clear the parent node reference\n\t\tif(this.ports[port.name]){\n\t\t\tthis.ports[port.name].setParentNode(null);\n\t\t\tdelete this.ports[port.name];\n\t\t}\n\t}\n\t\n\taddPort(port: PortModel): PortModel{\n\t\tport.setParentNode(this);\n\t\tthis.ports[port.name] = port;\n\t\treturn port;\n\t}\n\t\n\tgetType(): string{\n\t\treturn this.nodeType;\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/Common.ts","import {Toolkit} from \"./Toolkit\";\n/**\n * @author Dylan Vorster\n */\nexport class BaseListener{\n\t\n}\n\nexport class BaseEnity<T extends BaseListener>{\n\t\n\tpublic listeners:{[s: string]: T};\n\tpublic id: string;\n\t\n\tconstructor(){\n\t\tthis.listeners = {};\n\t\tthis.id = Toolkit.UID();\n\t}\n\t\n\tgetID(){\n\t\treturn this.id;\n\t}\n\t\n\tclearListeners(){\n\t\tthis.listeners = {};\n\t}\n\t\n\tpublic itterateListeners(cb: (t: T) => any){\n\t\tfor (var i in this.listeners){\n\t\t\tcb(this.listeners[i]);\n\t\t}\n\t}\n\t\n\tpublic removeListener(listener: string){\n\t\tif (this.listeners[listener]){\n\t\t\tdelete this.listeners[listener];\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\t\n\tpublic addListener(listener: T): string{\n\t\tvar uid = Toolkit.UID();\n\t\tthis.listeners[uid] = listener;\n\t\treturn uid;\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/BaseEntity.ts","import {LinkModel, NodeModel, BaseModel} from \"./Common\";\nimport {BaseListener, BaseEnity} from \"./BaseEntity\";\nimport * as _ from \"lodash\";\n/**\n * @author Dylan Vorster\n * \n */\nexport interface DiagramListener extends BaseListener{\n\t\n\tnodesUpdated(): any;\n\t\n\tlinksUpdated(): any;\n\t\n\tcontrolsUpdated(): any;\n\t\n}\n/**\n * \n */\nexport class DiagramModel extends BaseEnity<DiagramListener>{\n\t\n\t//models\n\tlinks: {[s:string] : LinkModel};\n\tnodes: {[s:string] : NodeModel};\n\t\n\t//control variables\n\toffsetX: number;\n\toffsetY: number;\n\tzoom: number;\n\t\n\tconstructor(){\n\t\tsuper();\n\t\t\n\t\tthis.links = {};\n\t\tthis.nodes = {};\n\t\t\n\t\tthis.offsetX = 0;\n\t\tthis.offsetY = 0;\n\t\tthis.zoom = 100;\n\t}\n\t\n\tclearSelection(ignore: BaseModel|null = null){\n\t\t_.forEach(this.getSelectedItems(),(element) => {\n\t\t\tif (ignore && ignore.getID() === element.getID()){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telement.setSelected(false); //TODO dont fire the listener\n\t\t});\n\t}\n\t\n\tgetSelectedItems(): BaseModel[]{\n\t\tvar items  = [];\n\t\t\n\t\t//find all nodes\n\t\titems = items.concat(_.filter(this.nodes,(node) => {\n\t\t\treturn node.isSelected();\n\t\t}));\n\t\t\n\t\t//find all points\n\t\titems = items.concat(_.filter(_.flatMap(this.links,(node) => {\n\t\t\treturn node.points;\n\t\t}),(port) => {\n\t\t\treturn port.isSelected();\n\t\t}));\n\t\t\n\t\t//find all links\n\t\treturn items.concat(_.filter(this.links,(link) => {\n\t\t\treturn link.isSelected();\n\t\t}));\n\t}\n\t\n\tsetZoomLevel(zoom:number){\n\t\tthis.zoom = zoom;\n\t\tthis.itterateListeners((listener) => {\n\t\t\tlistener.controlsUpdated();\n\t\t});\n\t}\n\t\n\tsetOffset(offsetX: number, offsetY: number){\n\t\tthis.offsetX = offsetX;\n\t\tthis.offsetY = offsetY;\n\t\tthis.itterateListeners((listener) => {\n\t\t\tlistener.controlsUpdated();\n\t\t});\n\t}\n\t\n\tsetOffsetX(offsetX: number){\n\t\tthis.offsetX = offsetX;\n\t\tthis.itterateListeners((listener) => {\n\t\t\tlistener.controlsUpdated();\n\t\t});\n\t}\n\tsetOffsetY(offsetY: number){\n\t\tthis.offsetX = offsetY;\n\t\tthis.itterateListeners((listener) => {\n\t\t\tlistener.controlsUpdated();\n\t\t});\n\t}\n\t\n\tgetOffsetY(){\n\t\treturn this.offsetY;\n\t}\n\t\n\tgetOffsetX(){\n\t\treturn this.offsetX;\n\t}\n\t\n\tgetZoomLevel(){\n\t\treturn this.zoom;\n\t}\n\t\n\tgetNode(node: string | NodeModel): NodeModel|null{\n\t\tif (node instanceof NodeModel){\n\t\t\treturn node;\n\t\t}\n\t\tif (!this.nodes[node]){\n\t\t\treturn null;\n\t\t}\n\t\treturn this.nodes[node];\n\t}\n\t\n\tgetLink(link: string | LinkModel): LinkModel|null{\n\t\tif (link instanceof LinkModel){\n\t\t\treturn link;\n\t\t}\n\t\tif(!this.links[link]){\n\t\t\treturn null;\n\t\t}\n\t\treturn this.links[link];\n\t}\n\t\n\taddLink(link: LinkModel): LinkModel{\n\t\tlink.addListener({\n\t\t\tentityRemoved: () => {\n\t\t\t\tthis.removeLink(link);\n\t\t\t}\n\t\t});\n\t\tthis.links[link.getID()] = link;\n\t\tthis.itterateListeners((listener) => {\n\t\t\tlistener.linksUpdated();\n\t\t});\n\t\treturn link\n\t}\n\t\n\taddNode(node: NodeModel): NodeModel{\n\t\tnode.addListener({\n\t\t\tentityRemoved: () => {\n\t\t\t\tthis.removeNode(node);\n\t\t\t}\n\t\t});\n\t\tthis.nodes[node.getID()] = node;\n\t\tthis.itterateListeners((listener) => {\n\t\t\tlistener.nodesUpdated();\n\t\t});\n\t\treturn node;\n\t}\n\t\n\tremoveLink(link: LinkModel | string){\n\t\tif (link instanceof LinkModel){\n\t\t\tdelete this.links[link.getID()];\n\t\t\tthis.itterateListeners((listener) => {\n\t\t\t\tlistener.linksUpdated();\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tdelete this.links[''+link];\n\t\tthis.itterateListeners((listener) => {\n\t\t\tlistener.linksUpdated();\n\t\t});\n\t}\n\tremoveNode(node: NodeModel | string){\n\t\tif (node instanceof NodeModel){\n\t\t\tdelete this.nodes[node.getID()];\n\t\t\tthis.itterateListeners((listener) => {\n\t\t\t\tlistener.nodesUpdated();\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\n\t\tdelete this.nodes[''+node];\n\t\tthis.itterateListeners((listener) => {\n\t\t\tlistener.nodesUpdated();\n\t\t});\n\t}\n\t\n\tgetLinks():{[s:string] : LinkModel} {\n\t\treturn this.links;\n\t}\n\t\n\tgetNodes(): {[s: string]: NodeModel}{\n\t\treturn this.nodes;\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/DiagramModel.ts","import * as React from \"react\";\nimport {LinkModel, PointModel} from \"../Common\";\nimport * as _ from \"lodash\";\nimport {DiagramEngine} from \"../DiagramEngine\";\n\nexport interface DefaultLinkProps {\n\tcolor?: string;\n\twidth?: number;\n\tlink: LinkModel;\n\tsmooth?: boolean;\n\tdiagramEngine: DiagramEngine;\n\tpointAdded?: (point: PointModel,event) => any\n}\n\nexport interface DefaultLinkState {\n\tselected: boolean;\n}\n\n/**\n * @author Dylan Vorster\n */\nexport class DefaultLinkWidget extends React.Component<DefaultLinkProps, DefaultLinkState> {\n\n\tpublic static defaultProps: DefaultLinkProps = {\n\t\tcolor: 'black',\n\t\twidth: 3,\n\t\tlink:null,\n\t\tengine: null,\n\t\tsmooth: false,\n\t\tdiagramEngine: null\n\t};\n\n\tconstructor(props: DefaultLinkProps) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tselected: false\n\t\t}\n\t}\n\t\n\tgeneratePoint(pointIndex: number): JSX.Element{\n\t\treturn React.DOM.g({key:'point-'+this.props.link.points[pointIndex].id},\n\t\t\tReact.DOM.circle({\n\t\t\t\tclassName: 'point pointui' + (this.props.link.points[pointIndex].isSelected()?' selected':''),\n\t\t\t\tcx:this.props.link.points[pointIndex].x,\n\t\t\t\tcy:this.props.link.points[pointIndex].y,\n\t\t\t\tr:5,\n\t\t\t}),\n\t\t\tReact.DOM.circle({\n\t\t\t\tclassName:'point',\n\t\t\t\t'data-linkid':this.props.link.id,\n\t\t\t\t'data-id':this.props.link.points[pointIndex].id,\n\t\t\t\tcx: this.props.link.points[pointIndex].x,\n\t\t\t\tcy:this.props.link.points[pointIndex].y,\n\t\t\t\tr:15,\n\t\t\t\topacity: 0,\n\t\t\t\tonMouseLeave:() => {\n\t\t\t\t\tthis.setState({selected: false});\n\t//\t\t\t\tthis.props.link.setSelected(false);\n\t\t\t\t},\n\t\t\t\tonMouseEnter:() => {\n\t\t\t\t\tthis.setState({selected: true});\n\t//\t\t\t\tthis.props.link.setSelected(true);\n\t\t\t\t},\n\t\t\t})\n\t\t);\n\t}\n\t\n\tgenerateLink(extraProps: {id: number}): JSX.Element{\n\t\tvar Bottom = React.DOM.path(_.merge({\n\t\t\tclassName: (this.state.selected || this.props.link.isSelected())?'selected':'',\n\t\t\tstrokeWidth:this.props.width,\n\t\t\tstroke: this.props.color\n\t\t},extraProps));\n\t\t\n\t\tvar Top = React.DOM.path(_.merge({\n\t\t\tonMouseLeave:() => {\n\t\t\t\tthis.setState({selected: false});\n\t\t\t},\n\t\t\tonMouseEnter:() => {\n\t\t\t\tthis.setState({selected: true});\n\t\t\t},\n\t\t\t'data-linkid': this.props.link.getID(),\n\t\t\tstroke: this.props.color,\n\t\t\tstrokeOpacity:this.state.selected?0.1:0 ,\n\t\t\tstrokeWidth: 20,\n\t\t\tonContextMenu: (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.props.link.remove();\n\t\t\t},\n\t\t},extraProps));\n\t\t\n\t\treturn React.DOM.g({key:'link-'+extraProps.id},\n\t\t\tBottom,Top\n\t\t);\n\t}\n\n\trender() {\n\t\t//ensure id is present for all points on the path\n\t\tvar points = this.props.link.points;\n\t\tvar paths = [];\n        \n        //draw the smoothing\n\t\tif(points.length === 2){\n\t\t\t\n            //if the points are too close, just draw a straight line\n\t\t\tvar margin = 50;\n\t\t\tif(Math.abs(points[0].x-points[1].x) < 50){\n\t\t\t\tmargin = 5;\n\t\t\t}\n            \n            var pointLeft = points[0];\n            var pointRight = points[1];\n            \n            //some defensive programming to make sure the smoothing is\n            //always in the right direction\n            if(pointLeft.x > pointRight.x){\n                pointLeft = points[1];\n                pointRight = points[0];\n            }\n\t\t\t\n\t\t\tpaths.push(this.generateLink({\n\t\t\t\tid: 0,\n\t\t\t\tonMouseDown: (event) =>{\n\t\t\t\t\tif (!event.shiftKey){\n\t\t\t\t\t\tvar point = new PointModel(this.props.link,this.props.diagramEngine.getRelativeMousePoint(event));\n\t\t\t\t\t\tpoint.setSelected(true);\n\t\t\t\t\t\tthis.forceUpdate();\n\t\t\t\t\t\tthis.props.link.addPoint(point,1);\n\t\t\t\t\t\tthis.props.pointAdded(point,event);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\td:\n\t\t\t\t\t \" M\"+pointLeft.x+\" \"+pointLeft.y\n\t\t\t\t\t+\" C\"+(pointLeft.x+margin)+\" \"+pointLeft.y\n\t\t\t\t\t+\" \" +(pointRight.x-margin)+\" \"+pointRight.y\n\t\t\t\t\t+\" \" +pointRight.x+\" \"+pointRight.y\n\t\t\t}));\n\t\t\tif (this.props.link.targetPort === null){\n\t\t\t\tpaths.push(this.generatePoint(1));\n\t\t\t}\n\t\t}\n        \n        //draw the multiple anchors and complex line instead\n        else{\n\t\t\tvar ds = [];\n\t\t\tif(this.props.smooth){\n\t\t\t\tds.push(\" M\"+points[0].x+\" \"+points[0].y+\" C \"+(points[0].x+50)+\" \"+points[0].y+\" \"+points[1].x+\" \"+points[1].y+\" \"+points[1].x+\" \"+points[1].y);\n\t\t\t\tfor(var i = 1;i < points.length-2;i++){\n\t\t\t\t\tds.push(\" M \"+points[i].x+\" \"+points[i].y+\" L \"+points[i+1].x+\" \"+points[i+1].y);\n\t\t\t\t}\n\t\t\t\tds.push(\" M\"+points[i].x+\" \"+points[i].y+\" C \"+points[i].x+\" \"+points[i].y+\" \"+(points[i+1].x-50)+\" \"+points[i+1].y+\" \"+points[i+1].x+\" \"+points[i+1].y);\n\t\t\t}else{\n\t\t\t\tvar ds = [];\n\t\t\t\tfor(var i = 0;i < points.length-1;i++){\n\t\t\t\t\tds.push(\" M \"+points[i].x+\" \"+points[i].y+\" L \"+points[i+1].x+\" \"+points[i+1].y);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tpaths = ds.map((data,index) => {\n\t\t\t\treturn this.generateLink({\n\t\t\t\t\tid:index,\n\t\t\t\t\t'data-linkid':this.props.link.id,\n\t\t\t\t\t'data-point':index,\n\t\t\t\t\tonMouseDown: (event: MouseEvent) => {\n\t\t\t\t\t\tif (!event.shiftKey){\n\t\t\t\t\t\t\tvar point = new PointModel(this.props.link,this.props.diagramEngine.getRelativeMousePoint(event));\n\t\t\t\t\t\t\tpoint.setSelected(true);\n\t\t\t\t\t\t\tthis.forceUpdate();\n\t\t\t\t\t\t\tthis.props.link.addPoint(point,index+1);\n\t\t\t\t\t\t\tthis.props.pointAdded(point,event);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\td:data\n\t\t\t\t});\n\t\t\t});\n\t\t\t\n\t\t\t//render the circles\n\t\t\tfor(var i = 1;i < points.length-1;i++){\n\t\t\t\tpaths.push(this.generatePoint(i));\n\t\t\t}\n\t\t\t\n\t\t\tif (this.props.link.targetPort === null){\n\t\t\t\tpaths.push(this.generatePoint(points.length-1));\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn (\n\t\t\tReact.DOM.g(null,paths)\n\t\t);\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/defaults/DefaultLinkWidget.ts","import * as React from \"react\";\nimport {NodeModel} from \"../Common\";\nimport {PortWidget} from \"../widgets/PortWidget\";\n\nexport interface DefaultNodeProps {\n\tname?: string;\n\tnode: NodeModel;\n\tinPorts?: (string | {name: string, display: string})[];\n\toutPorts?: (string | {name: string, display: string})[];\n\tcolor?: string;\n}\n\nexport interface DefaultNodeState {\n}\n\n/**\n * @author Dylan Vorster\n */\nexport class DefaultNodeWidget extends React.Component<DefaultNodeProps, DefaultNodeState> {\n\n\tpublic static defaultProps: DefaultNodeProps = {\n\t\tname: \"Node\",\n\t\tnode: null,\n\t\tinPorts:[],\n\t\toutPorts: [],\n\t\tcolor: 'rgb(50,50,50)',\n\t};\n\n\tconstructor(props: DefaultNodeProps) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\tReact.DOM.div({className:'basic-node', style: {background:this.props.color }},\n\t\t\t\tReact.DOM.div({className:'title'},\n\t\t\t\t\tReact.DOM.div({className:'name'},this.props.name),\n\t\t\t\t\tReact.DOM.div({className: 'fa fa-close', onClick: this.props.node.remove})\n\t\t\t\t),\n\t\t\t\tReact.DOM.div({className:'ports'},\n\t\t\t\t\tReact.DOM.div({className:'in'},this.props.inPorts.map((port) => {\n\t\t\t\t\t\tvar portName = \"\";\n\t\t\t\t\t\tvar displayName = \"\";\n\t\t\t\t\t\tif(typeof port === 'object'){\n\t\t\t\t\t\t\tportName = port.name;\n\t\t\t\t\t\t\tdisplayName = port.display;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tportName = port;\n\t\t\t\t\t\t\tdisplayName = port;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn React.DOM.div({className:'in-port',key: portName},\n\t\t\t\t\t\t\tReact.createElement(PortWidget,{name:portName,node:this.props.node}),\n\t\t\t\t\t\t\tReact.DOM.div({className:'name'},displayName)\n\t\t\t\t\t\t);\n\t\t\t\t\t})),\n\t\t\t\t\tReact.DOM.div({className:'out'},this.props.outPorts.map((port) => {\n\t\t\t\t\t\tvar portName = \"\";\n\t\t\t\t\t\tvar displayName = \"\";\n\t\t\t\t\t\tif(typeof port === 'object'){\n\t\t\t\t\t\t\tportName = port.name;\n\t\t\t\t\t\t\tdisplayName = port.display;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tportName = port;\n\t\t\t\t\t\t\tdisplayName = port;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn React.DOM.div({className:'out-port',key: portName},\n\t\t\t\t\t\t\tReact.DOM.div({className:'name'},displayName),\n\t\t\t\t\t\t\tReact.createElement(PortWidget,{name:portName,node:this.props.node})\n\t\t\t\t\t\t);\n\t\t\t\t\t}))\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/defaults/DefaultNodeWidget.ts","/**\n * @author Dylan Vorster\n */\nexport class Toolkit {\n\t/**\n   * Generats a unique ID (thanks Stack overflow :3)\n   * @returns {String}\n   */\n\tpublic static UID():string {\n\t\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n\t\t\tvar r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n\t\t\treturn v.toString(16);\n\t\t});\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/Toolkit.ts","import {NodeModel, LinkModel} from \"./Common\";\nimport {DiagramEngine} from \"./DiagramEngine\";\n/**\n * @author Dylan Vorster\n */\nexport abstract class WidgetFactory{\n\t\n\ttype: string;\n\t\n\tconstructor(name: string){\n\t\tthis.type = name;\n\t}\n\t\n\tgetType(): string{\n\t\treturn this.type;\n\t}\n\t\n}\n\nexport abstract class NodeWidgetFactory extends WidgetFactory{\n\t\n\tabstract generateReactWidget(diagramEngine:DiagramEngine,node: NodeModel): JSX.Element;\n\t\n}\n\nexport abstract class LinkWidgetFactory extends WidgetFactory{\n\t\n\tabstract generateReactWidget(diagramEngine:DiagramEngine,link: LinkModel): JSX.Element;\n\t\n}\n\n\n// WEBPACK FOOTER //\n// ./src/WidgetFactories.ts","import {NodeWidgetFactory, LinkWidgetFactory} from \"./WidgetFactories\";\nimport {LinkModel, NodeModel, BaseModel, PortModel, PointModel} from \"./Common\";\nimport {BaseEnity, BaseListener} from \"./BaseEntity\";\nimport {DiagramModel} from \"./DiagramModel\";\nimport * as React from \"react\";\nimport * as _ from \"lodash\";\n/**\n * @author Dylan Vorster\n */\nexport interface DiagramEngineListener extends BaseListener{\n\t\n\tnodeFactoriesUpdated(): any;\n\t\n\tlinkFactoriesUpdated(): any;\n}\n\n/**\n * Passed as a parameter to the DiagramWidget\n */\nexport class DiagramEngine extends BaseEnity<DiagramEngineListener>{\n\t\n\tnodeFactories: {[s: string]:NodeWidgetFactory};\n\tlinkFactories: {[s: string]:LinkWidgetFactory};\n\tdiagramModel: DiagramModel;\n\tcanvas: Element;\n\tpaintableWidgets: {};\n\t\n\tconstructor(){\n\t\tsuper();\n\t\tthis.diagramModel = new DiagramModel();\n\t\tthis.nodeFactories = {};\n\t\tthis.linkFactories = {};\n\t\tthis.canvas = null;\n\t\tthis.paintableWidgets = null;\n\t}\n\t\n\tclearRepaintEntities(){\n\t\tthis.paintableWidgets = null;\n\t}\n\t\n\tenableRepaintEntities(entities: BaseModel[]){\n\t\tthis.paintableWidgets = {};\n\t\tentities.forEach((entity) => {\n\t\t\t\n\t\t\t//if a node is requested to repaint, add all of its links\n\t\t\tif (entity instanceof NodeModel){\n\t\t\t\t_.forEach(entity.getPorts(),(port) => {\n\t\t\t\t\t_.forEach(port.getLinks(),(link) => {\n\t\t\t\t\t\tthis.paintableWidgets[link.getID()] = true;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tif (entity instanceof PointModel){\n\t\t\t\tthis.paintableWidgets[entity.getLink().getID()] = true;\n\t\t\t}\n\t\t\t\n\t\t\tthis.paintableWidgets[entity.getID()] = true;\n\t\t});\n\t}\n\t\n\tcanEntityRepaint(baseModel: BaseModel){\n\t\t//no rules applied, allow repaint\n\t\tif(this.paintableWidgets === null){\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\treturn this.paintableWidgets[baseModel.getID()] !== undefined;\n\t}\n\t\n\tsetCanvas(canvas: Element| null){\n\t\tthis.canvas = canvas;\n\t}\n\t\n\tsetDiagramModel(model: DiagramModel){\n\t\tthis.diagramModel = model;\n\t}\n\t\n\tgetDiagramModel(): DiagramModel{\n\t\treturn this.diagramModel;\n\t}\n\t\n\tgetNodeFactories(): {[s: string]:NodeWidgetFactory}{\n\t\treturn this.nodeFactories;\n\t}\n\t\n\tgetLinkFactories(): {[s: string]:LinkWidgetFactory}{\n\t\treturn this.linkFactories;\n\t}\n\t\n\tregisterNodeFactory(factory: NodeWidgetFactory){\n\t\tthis.nodeFactories[factory.getType()] = factory;\n\t\tthis.itterateListeners((listener) => {\n\t\t\tlistener.nodeFactoriesUpdated();\n\t\t});\n\t}\n\t\n\tregisterLinkFactory(factory: LinkWidgetFactory){\n\t\tthis.linkFactories[factory.getType()] = factory;\n\t\tthis.itterateListeners((listener) => {\n\t\t\tlistener.linkFactoriesUpdated();\n\t\t});\n\t}\n\t\n\tgetFactoryForNode(node: NodeModel): NodeWidgetFactory | null{\n\t\tif (this.nodeFactories[node.getType()]){\n\t\t\treturn this.nodeFactories[node.getType()];\n\t\t}\n\t\tconsole.log(\"cannot find widget factory for node of type: [\" + node.getType()+\"]\");\n\t\treturn null;\n\t}\n\t\n\tgetFactoryForLink(link: LinkModel): LinkWidgetFactory | null{\n\t\tif (this.linkFactories[link.getType()]){\n\t\t\treturn this.linkFactories[link.getType()];\n\t\t}\n\t\tconsole.log(\"cannot find widget factory for link of type: [\" + link.getType()+\"]\");\n\t\treturn null;\n\t}\n\t\n\tgenerateWidgetForLink(link: LinkModel): JSX.Element|null{\n\t\tvar linkFactory = this.getFactoryForLink(link);\n\t\tif(!linkFactory){\n\t\t\tthrow \"Cannot find link factory for link: \" + link.getType();\n\t\t}\n\t\treturn linkFactory.generateReactWidget(this,link);\n\t}\n\t\n\tgenerateWidgetForNode(node: NodeModel): JSX.Element|null{\n\t\tvar nodeFactory = this.getFactoryForNode(node);\n\t\tif(!nodeFactory){\n\t\t\tthrow \"Cannot find widget factory for node: \" + node.getType();\n\t\t}\n\t\treturn nodeFactory.generateReactWidget(this,node);\n\t}\n\t\n\tgetRelativeMousePoint(event): {x:number,y:number}{\n\t\tvar point = this.getRelativePoint(event.pageX,event.pageY);\n\t\treturn {\n\t\t\tx: (point.x / (this.diagramModel.getZoomLevel() / 100.0)) - this.diagramModel.getOffsetX(),\n\t\t\ty: (point.y / (this.diagramModel.getZoomLevel() / 100.0)) - this.diagramModel.getOffsetY()\n\t\t};\n\t}\n\n\tgetRelativePoint(x,y){\n\t\tvar canvasRect = this.canvas.getBoundingClientRect();\n\t\treturn {x: x-canvasRect.left,y:y-canvasRect.top};\n\t}\n\t\n\tgetNodePortElement(port: PortModel): any{\n\t\tvar selector = this.canvas.querySelector('.port[data-name=\"' + port.getName() + '\"][data-nodeid=\"' + port.getParent().getID()+'\"]');\n\t\tif(selector === null){\n\t\t\tthrow \"Cannot find Node Port element with nodeID: [\" + port.getParent().getID()+\"] and name: [\"+port.getName()+\"]\";\n\t\t}\n\t\treturn selector;\n\t}\n\t\n\tgetPortCenter(port: PortModel){\n\t\tvar sourceElement = this.getNodePortElement(port);\n\t\tvar sourceRect = sourceElement.getBoundingClientRect();\n\n\t\tvar rel = this.getRelativePoint(sourceRect.left,sourceRect.top);\n\n\t\treturn {\n\t\t\tx: ((sourceElement.offsetWidth / 2) + rel.x / (this.diagramModel.getZoomLevel() / 100.0)) - this.diagramModel.getOffsetX(),\n\t\t\ty: ((sourceElement.offsetHeight/2)+rel.y/(this.diagramModel.getZoomLevel()/100.0)) - this.diagramModel.getOffsetY()\n\t\t};\n\t}\n\t\n}\n\n\n// WEBPACK FOOTER //\n// ./src/DiagramEngine.ts","import {LinkWidgetFactory} from \"../WidgetFactories\";\nimport {LinkModel} from \"../Common\";\nimport * as React from \"react\";\nimport {DefaultLinkWidget} from \"./DefaultLinkWidget\";\nimport {DiagramEngine} from \"../DiagramEngine\";\n/**\n * @author Dylan Vorster\n */\nexport class DefaultLinkFactory extends LinkWidgetFactory{\n\t\n\tconstructor(){\n\t\tsuper(\"default\");\n\t}\n\t\n\tgenerateReactWidget(diagramEngine: DiagramEngine,link: LinkModel): JSX.Element{\n\t\treturn React.createElement(DefaultLinkWidget,{\n\t\t\tlink: link,\n\t\t\tdiagramEngine: diagramEngine\n\t\t});\n\t}\n\t\n}\n\n\n// WEBPACK FOOTER //\n// ./src/defaults/DefaultLinkFactory.ts","import {NodeWidgetFactory} from \"../WidgetFactories\";\nimport {NodeModel} from \"../Common\";\nimport * as React from \"react\";\nimport {DefaultNodeWidget} from \"./DefaultNodeWidget\";\nimport {DiagramEngine} from \"../DiagramEngine\";\n/**\n * @author Dylan Vorster\n */\nexport class DefaultNodeFactory extends NodeWidgetFactory{\n\t\n\tconstructor(){\n\t\tsuper(\"default\");\n\t}\n\t\n\tgenerateReactWidget(diagramEngine:DiagramEngine,node: NodeModel): JSX.Element{\n\t\treturn React.createElement(DefaultNodeWidget,{\n\t\t\tnode: node,\n\t\t\tdiagramEngine: diagramEngine,\n\t\t\tcolor: node.extras['color'],\n\t\t\tname: node.extras['name'],\n\t\t\tinPorts: node.extras['inPorts'],\n\t\t\toutPorts: node.extras['outPorts'],\n\t\t});\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/defaults/DefaultNodeFactory.ts","import * as React from \"react\";\nimport {DiagramEngine} from \"../DiagramEngine\";\nimport {DiagramModel} from \"../DiagramModel\";\nimport * as _ from \"lodash\";\nimport {PointModel, NodeModel, BaseModel, LinkModel,PortModel} from \"../Common\";\nimport {LinkLayerWidget} from \"./LinkLayerWidget\";\nimport {NodeLayerWidget} from \"./NodeLayerWidget\";\n\ninterface SelectionModel{\n\tmodel: BaseModel;\n\tinitialX: number;\n\tinitialY: number;\n}\n\nexport class BaseAction{\n\tmouseX: number;\n\tmouseY: number;\n\tms: number;\n\t\n\tconstructor(mouseX: number,mouseY: number){\n\t\tthis.mouseX = mouseX;\n\t\tthis.mouseY = mouseY;\n\t\tthis.ms = (new Date()).getTime();\n\t}\n}\n\nclass SelectingAction extends BaseAction{\n\tmouseX2: number;\n\tmouseY2: number;\n\t\n\tconstructor(mouseX: number,mouseY: number){\n\t\tsuper(mouseX,mouseY);\n\t\tthis.mouseX2 = mouseX;\n\t\tthis.mouseY2 = mouseY;\n\t}\n\t\n\tcontainsElement(x: number, y: number, diagramModel: DiagramModel): boolean{\n\t\tvar z = diagramModel.getZoomLevel()/100.0;\n\t\treturn (\n\t\t\t(x + diagramModel.getOffsetX())*z > this.mouseX\t&& \n\t\t\t(x + diagramModel.getOffsetX())*z < this.mouseX2&& \n\t\t\t(y + diagramModel.getOffsetY())*z > this.mouseY\t&& \n\t\t\t(y + diagramModel.getOffsetY())*z < this.mouseY2\n\t\t)\n\t}\n}\n\nclass MoveCanvasAction extends BaseAction{\n\tinitialOffsetX: number;\n\tinitialOffsetY: number;\n\t\n\tconstructor(mouseX: number, mouseY: number, diagramModel: DiagramModel){\n\t\tsuper(mouseX,mouseY);\n\t\tthis.initialOffsetX = diagramModel.getOffsetX();\n\t\tthis.initialOffsetY = diagramModel.getOffsetY();\n\t}\n}\n\nclass MoveItemsAction extends BaseAction{\n\tselectionModels: SelectionModel[];\n\tmoved:boolean;\n\tconstructor(mouseX: number, mouseY: number, diagramEngine: DiagramEngine){\n\t\tsuper(mouseX, mouseY);\n\t\tthis.moved = false;\n\t\tdiagramEngine.enableRepaintEntities(diagramEngine.getDiagramModel().getSelectedItems());\n\t\tthis.selectionModels = diagramEngine.getDiagramModel().getSelectedItems().map((item: PointModel | NodeModel) => {\n\t\t\treturn {\n\t\t\t\tmodel: item,\n\t\t\t\tinitialX: item.x,\n\t\t\t\tinitialY: item.y,\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport interface DiagramProps {\n\tdiagramEngine:DiagramEngine;\n}\n\nexport interface DiagramState {\n\taction: BaseAction| null;\n\trenderedNodes: boolean,\n\twindowListener: any,\n}\n\n/**\n * @author Dylan Vorster\n */\nexport class DiagramWidget extends React.Component<DiagramProps, DiagramState> {\n\n\tconstructor(props: DiagramProps) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\taction: null,\n\t\t\trenderedNodes: false,\n\t\t\twindowListener: null\n\t\t}\n\t}\n\n\tcomponentWillUnmount(){\n\t\tthis.props.diagramEngine.setCanvas(null);\n\t\twindow.removeEventListener('keydown',this.state.windowListener);\n\t}\n\t\n\tcomponentWillReceiveProps(nextProps: DiagramProps){\n\t\tif (this.props.diagramEngine.id !== nextProps.diagramEngine.id){\n\t\t\tthis.setState({renderedNodes: false});\n\t\t}\n\t}\n\t\n\t/**\n\t * Gets a model and element under the mouse cursor\n\t */\n\tgetMouseElement(event): {model: BaseModel, element: Element}{\n\t\tvar target = event.target as Element;\n\t\tvar diagramModel = this.props.diagramEngine.diagramModel;\n\t\t\n\t\t//is it a port\n\t\tvar element = target.closest('.port[data-name]');\n\t\tif(element){\n\t\t\tvar nodeElement = target.closest('.node[data-nodeid]') as HTMLElement;\n\t\t\treturn {\n\t\t\t\tmodel: diagramModel.getNode(nodeElement.getAttribute('data-nodeid')).getPort(element.getAttribute('data-name')),\n\t\t\t\telement: element\n\t\t\t};\n\t\t}\n\t\t\n\t\t//look for a point\n\t\telement = target.closest('.point[data-id]');\n\t\tif(element){\n\t\t\treturn {\n\t\t\t\tmodel: diagramModel.getLink(element.getAttribute('data-linkid')).getPointModel(element.getAttribute('data-id')),\n\t\t\t\telement: element\n\t\t\t};\n\t\t}\n\t\t\n\t\t//look for a link\n\t\telement = target.closest('[data-linkid]');\n\t\tif(element){\n\t\t\treturn {\n\t\t\t\tmodel: diagramModel.getLink(element.getAttribute('data-linkid')),\n\t\t\t\telement: element\n\t\t\t};\n\t\t}\n\t\t\n\t\t//look for a node\n\t\telement = target.closest('.node[data-nodeid]');\n\t\tif(element){\n\t\t\treturn {\n\t\t\t\tmodel: diagramModel.getNode(element.getAttribute('data-nodeid')),\n\t\t\t\telement: element\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn null;\n\t}\n\t\n\tcomponentDidMount(){\n\t\tthis.props.diagramEngine.setCanvas(this.refs['canvas'] as Element);\n\t\t\n\t\t//TODO\n\t\t\n\t\t//add a keybaord listener\n\t\tthis.setState({\n\t\t\trenderedNodes: true,\n\t\t\twindowListener: window.addEventListener('keydown',(event) => {\n\t\t\t\t\n\t\t\t\t//delete all selected\n\t\t\t\tif(event.keyCode === 46){\n\t\t\t\t\t_.forEach(this.props.diagramEngine.getDiagramModel().getSelectedItems(),(element) => {\n\t\t\t\t\t\telement.remove();\n\t\t\t\t\t});\n\t\t\t\t\tthis.forceUpdate();\n\t\t\t\t}\n\t\t\t})\n\t\t});\n\t\twindow.focus();\n\t}\n\t\n\n\trender() {\n\t\tvar diagramEngine = this.props.diagramEngine;\n\t\tvar diagramModel = diagramEngine.getDiagramModel();\n\t\t\n\t\treturn (\n\t\t\tReact.DOM.div({\n\t\t\t\t\tref:'canvas',\n\t\t\t\t\tclassName:'storm-diagrams-canvas',\n\t\t\t\t\tonWheel: (event) => {\n                        event.preventDefault();\n                        event.stopPropagation();\n\t\t\t\t\t\tdiagramModel.setZoomLevel(diagramModel.getZoomLevel()+(event.deltaY/60));\n\t\t\t\t\t\tdiagramEngine.enableRepaintEntities([]);\n\t\t\t\t\t\tthis.forceUpdate();\n\t\t\t\t\t},\n\t\t\t\t\tonMouseMove: (event) => {\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t//select items so draw a bounding box\n\t\t\t\t\t\tif (this.state.action instanceof SelectingAction){\n\t\t\t\t\t\t\tvar relative = diagramEngine.getRelativePoint(event.pageX, event.pageY);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t_.forEach(diagramModel.getNodes(),(node) => {\n\t\t\t\t\t\t\t\tif ((this.state.action as SelectingAction).containsElement(node.x, node.y, diagramModel)){\n\t\t\t\t\t\t\t\t\tnode.setSelected(true);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t_.forEach(diagramModel.getLinks(),(link) => {\n\t\t\t\t\t\t\t\tvar allSelected = true;\n\t\t\t\t\t\t\t\t_.forEach(link.points,(point) => {\n\t\t\t\t\t\t\t\t\tif ((this.state.action as SelectingAction).containsElement(point.x, point.y, diagramModel)){\n\t\t\t\t\t\t\t\t\t\tpoint.setSelected(true);\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\tallSelected = false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (allSelected){\n\t\t\t\t\t\t\t\t\tlink.setSelected(true);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.state.action.mouseX2 = relative.x;\n\t\t\t\t\t\t\tthis.state.action.mouseY2 = relative.y;\n\t\t\t\t\t\t\tthis.setState({action: this.state.action});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t//translate the items on the canvas\n\t\t\t\t\t\telse if (this.state.action instanceof MoveItemsAction){\n\t\t\t\t\t\t\t_.forEach(this.state.action.selectionModels,(model) => {\n\t\t\t\t\t\t\t\tif (model.model instanceof NodeModel || model.model instanceof PointModel){\n\t\t\t\t\t\t\t\t\tmodel.model.x = model.initialX + ((event.pageX - this.state.action.mouseX) / (diagramModel.getZoomLevel()/100));\n\t\t\t\t\t\t\t\t\tmodel.model.y = model.initialY + ((event.pageY - this.state.action.mouseY) / (diagramModel.getZoomLevel()/100));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.forceUpdate();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t//translate the actual canvas\n\t\t\t\t\t\telse if (this.state.action instanceof MoveCanvasAction){\n\t\t\t\t\t\t\tdiagramModel.setOffset(\n\t\t\t\t\t\t\t\tthis.state.action.initialOffsetX + ((event.pageX - this.state.action.mouseX) / (diagramModel.getZoomLevel()/100)),\n\t\t\t\t\t\t\t\tthis.state.action.initialOffsetY+((event.pageY-this.state.action.mouseY)/(diagramModel.getZoomLevel()/100))\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.forceUpdate();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tonMouseDown: (event) =>{\n\t\t\t\t\t\tdiagramEngine.clearRepaintEntities();\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar model = this.getMouseElement(event);\n\t\t\t\t\t\t//its the canvas\n\t\t\t\t\t\tif(model === null){\n\t\t\t\t\t\t\t//is it a multiple selection\n\t\t\t\t\t\t\tif (event.shiftKey){\n\t\t\t\t\t\t\t\tvar relative = diagramEngine.getRelativePoint(event.pageX, event.pageY);\n\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\taction: new SelectingAction(\n\t\t\t\t\t\t\t\t\t\trelative.x, relative.y\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t//its a drag the canvas event\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tvar relative = diagramEngine.getRelativePoint(event.pageX, event.pageY);\n\t\t\t\t\t\t\t\tdiagramModel.clearSelection();\n\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\taction: new MoveCanvasAction(relative.x, relative.y, diagramModel)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t//its a port element, we want to drag a link\n\t\t\t\t\t\telse if (model.model instanceof PortModel){\n\t\t\t\t\t\t\tvar relative = diagramEngine.getRelativeMousePoint(event);\n\t\t\t\t\t\t\tvar link = new LinkModel();\n\t\t\t\t\t\t\tlink.setSourcePort(model.model);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tlink.getFirstPoint().updateLocation(relative)\n\t\t\t\t\t\t\tlink.getLastPoint().updateLocation(relative);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tdiagramModel.clearSelection();\n\t\t\t\t\t\t\tlink.getLastPoint().setSelected(true);\n\t\t\t\t\t\t\tdiagramModel.addLink(link);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\taction: new MoveItemsAction(event.pageX, event.pageY, diagramEngine)\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//its some or other element, probably want to move it\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (!event.shiftKey && !model.model.isSelected()){\n\t\t\t\t\t\t\t\tdiagramModel.clearSelection();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmodel.model.setSelected(true);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\taction: new MoveItemsAction(event.pageX, event.pageY,diagramEngine)\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tonMouseUp: (event) => {\n\t\t\t\t\t\t\n\t\t\t\t\t\t//are we going to connect a link to something?\n\t\t\t\t\t\tif (this.state.action instanceof MoveItemsAction){\n\t\t\t\t\t\t\tvar element = this.getMouseElement(event);\n\t\t\t\t\t\t\tif(element){\n\t\t\t\t\t\t\t\t_.forEach(this.state.action.selectionModels,(model) => {\n\n\t\t\t\t\t\t\t\t\t//only care about points connecting to things\n\t\t\t\t\t\t\t\t\tif (!(model.model instanceof PointModel)){\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (element.model instanceof PortModel){\n\t\t\t\t\t\t\t\t\t\tmodel.model.getLink().setTargetPort(element.model);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tdiagramEngine.clearRepaintEntities();\n\t\t\t\t\t\tthis.setState({action: null});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tthis.state.renderedNodes?\n\t\t\t\t\tReact.createElement(LinkLayerWidget, {\n\t\t\t\t\t\tdiagramEngine: diagramEngine, pointAdded: (point: PointModel,event) => {\n\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t\tdiagramModel.clearSelection(point);\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\taction: new MoveItemsAction(event.pageX, event.pageY, diagramEngine)\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}):null,\n\t\t\t\t\tReact.createElement(NodeLayerWidget, {diagramEngine: diagramEngine}),\n\t\t\t\t\tthis.state.action instanceof SelectingAction?\n\t\t\t\t\t\tReact.DOM.div({\n\t\t\t\t\t\t\tclassName: 'selector',\n\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\ttop: this.state.action.mouseY,\n\t\t\t\t\t\t\t\tleft: this.state.action.mouseX,\n\t\t\t\t\t\t\t\twidth: this.state.action.mouseX2 - this.state.action.mouseX,\n\t\t\t\t\t\t\t\theight: this.state.action.mouseY2 - this.state.action.mouseY,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}):null\n\t\t\t)\n\t\t);\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/DiagramWidget.ts","import * as React from \"react\";\nimport {DiagramModel} from \"../DiagramModel\";\nimport {DiagramEngine} from \"../DiagramEngine\";\nimport {PointModel} from \"../Common\";\nimport {LinkWidget} from \"./LinkWidget\";\nimport * as _ from \"lodash\";\n\nexport interface LinkLayerProps {\n\tdiagramEngine: DiagramEngine,\n\tpointAdded: (point: PointModel,event) => any\n}\n\nexport interface LinkLayerState {\n}\n\n/**\n * @author Dylan Vorster\n */\nexport class LinkLayerWidget extends React.Component<LinkLayerProps, LinkLayerState> {\n\n\tconstructor(props: LinkLayerProps) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t}\n\t}\n\t\n\tcomponentDidMount(){\n\t\tsetTimeout(()=> {\n\t\t\tthis.forceUpdate();\n\t\t},10);\n\t}\n\t\n\trender() {\n\t\t\n\t\tvar diagramModel = this.props.diagramEngine.getDiagramModel();\n\t\t\n\t\treturn (\n\t\t\tReact.DOM.svg(\n\t\t\t\t{\n                    style:{\n\t\t\t\t\t\ttransform: 'scale(' + diagramModel.getZoomLevel() / 100.0 + ') translate(' + diagramModel.getOffsetX() + 'px,' + diagramModel.getOffsetY()+'px)',\n                        width: '100%',\n                        height: '100%'\n                    }\n                },\n\t\t\t\t_.map(diagramModel.getLinks(),(link) => {\n\t\t\t\t\t\n\t\t\t\t\t//TODO just improve this vastly x_x\n\t\t\t\t\tif (link.sourcePort !== null){\n\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\t//generate a point\n\t\t\t\t\t\t\tlink.points[0].updateLocation(this.props.diagramEngine.getPortCenter(link.sourcePort));\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//remove the link because its problematic (TODO implement this rather at an engine level)\n\t\t\t\t\t\tcatch(ex){\n\t\t\t\t\t\t\tconsole.log(ex);\n\t\t\t\t\t\t\tdiagramModel.removeLink(link);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (link.targetPort !== null){\n\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\t_.last(link.points).updateLocation(this.props.diagramEngine.getPortCenter(link.targetPort));\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//remove the link because its problematic (TODO implement this rather at an engine level)\n\t\t\t\t\t\tcatch(ex){\n\t\t\t\t\t\t\tconsole.log(ex);\n\t\t\t\t\t\t\tdiagramModel.removeLink(link);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n                    \n\t\t\t\t\t//generate links\n\t\t\t\t\tvar generatedLink = this.props.diagramEngine.generateWidgetForLink(link);\n                    if(!generatedLink){\n\t\t\t\t\t\tconsole.log(\"no link generated for type: \" + link.getType());\n\t\t\t\t\t\treturn null;\n                    }\n\t\t\t\t\t\n\t\t\t\t\treturn (\n\t\t\t\t\t\tReact.createElement(LinkWidget, {\n\t\t\t\t\t\t\tkey: link.getID(), \n\t\t\t\t\t\t\tlink: link,\n\t\t\t\t\t\t\tdiagramEngine: this.props.diagramEngine,\n\t\t\t\t\t\t}, React.cloneElement(generatedLink,{pointAdded: this.props.pointAdded}))\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t)\n\t\t);\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/LinkLayerWidget.ts","import * as React from \"react\";\nimport {LinkModel} from \"../Common\";\nimport {DiagramEngine} from \"../DiagramEngine\";\n\nexport interface LinkProps {\n\tlink: LinkModel;\n\tdiagramEngine: DiagramEngine;\n\tchildren?: any;\n}\n\nexport interface LinkState {\n}\n\n/**\n * @author Dylan Vorster\n */\nexport class LinkWidget extends React.Component<LinkProps, LinkState> {\n\n\tconstructor(props: LinkProps) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t}\n\t}\n\t\n\tshouldComponentUpdate(){\n\t\treturn this.props.diagramEngine.canEntityRepaint(this.props.link);\n\t}\n\n\trender() {\n\t\treturn this.props.children;\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/LinkWidget.ts","import * as React from \"react\";\nimport {DiagramModel} from \"../DiagramModel\";\nimport {DiagramEngine} from \"../DiagramEngine\";\nimport * as _ from \"lodash\";\nimport {NodeWidget} from \"./NodeWidget\";\n\nexport interface NodeLayerProps {\n\tdiagramEngine: DiagramEngine\n}\n\nexport interface NodeLayerState {\n}\n\n/**\n * @author Dylan Vorster\n */\nexport class NodeLayerWidget extends React.Component<NodeLayerProps, NodeLayerState> {\n\n\tconstructor(props: NodeLayerProps) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t}\n\t}\n\n\trender() {\n\t\t\n\t\tvar diagramModel = this.props.diagramEngine.getDiagramModel();\n\t\t\n\t\treturn (\n\t\t\tReact.DOM.div({\n\t\t\t\t\tclassName:'node-view',\n\t\t\t\t\tstyle:{\n\t\t\t\t\t\ttransform: 'scale(' + diagramModel.getZoomLevel() / 100.0 + ') translate(' + diagramModel.getOffsetX()+'px,'+diagramModel.getOffsetY()+'px)',\n\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\theight: '100%'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t_.map(diagramModel.getNodes(),(node) => {\n\t\t\t\t\treturn(\n\t\t\t\t\t\tReact.createElement(NodeWidget, {diagramEngine: this.props.diagramEngine,key:node.id,node: node},\n\t\t\t\t\t\t\tthis.props.diagramEngine.generateWidgetForNode(node))\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t)\n\t\t);\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/NodeLayerWidget.ts","import * as React from \"react\";\nimport {NodeModel} from \"../Common\";\nimport {DiagramEngine} from \"../DiagramEngine\";\n\nexport interface NodeProps {\n\tnode:NodeModel;\n\tchildren?: any;\n\tdiagramEngine: DiagramEngine\n}\n\nexport interface NodeState {\n}\n\n/**\n * @author Dylan Vorster\n */\nexport class NodeWidget extends React.Component<NodeProps, NodeState> {\n\n\tconstructor(props: NodeProps) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t}\n\t}\n\t\n\tshouldComponentUpdate(){\n\t\treturn this.props.diagramEngine.canEntityRepaint(this.props.node);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\tReact.DOM.div({\n\t\t\t\t'data-nodeid': this.props.node.id,\n\t\t\t\tclassName: 'node' + (this.props.node.isSelected()?' selected':''),\n\t\t\t\tstyle:{\n\t\t\t\t\ttop: this.props.node.y,\n\t\t\t\t\tleft: this.props.node.x,\n\t\t\t\t}},\n\t\t\t\tReact.cloneElement(this.props.children,{})\n\t\t\t)\n\t\t);\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/NodeWidget.ts","import * as React from \"react\";\nimport {NodeModel} from \"../Common\";\n\nexport interface PortProps {\n\tname: string;\n\tnode: NodeModel;\n}\n\nexport interface PortState{\n\tselected: boolean\n}\n\n/**\n * @author Dylan Vorster\n */\nexport class PortWidget extends React.Component<PortProps, PortState> {\n\n\tconstructor(props: PortProps){\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tselected: false\n\t\t};\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\tReact.DOM.div({\n\t\t\t\tonMouseEnter: () =>{\n\t\t\t\t\tthis.setState({selected: true});\n\t\t\t\t},\n\t\t\t\tonMouseLeave: () => {\n\t\t\t\t\tthis.setState({selected: false});\n\t\t\t\t},\n\t\t\t\tclassName:'port'+(this.state.selected?' selected':''),\n\t\t\t\t'data-name':this.props.name,\n\t\t\t\t'data-nodeid': this.props.node.getID()\n\t\t\t})\n\t\t);\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/PortWidget.ts","/**\n * @author Dylan Vorster\n */\n \n //export defaults\nexport * from \"./defaults/DefaultLinkFactory\";\nexport * from \"./defaults/DefaultLinkWidget\";\nexport * from \"./defaults/DefaultNodeFactory\";\nexport * from \"./defaults/DefaultNodeWidget\";\n\nexport * from \"./DiagramEngine\";\nexport * from \"./DiagramModel\";\nexport * from \"./Common\";\n\nexport * from \"./widgets/DiagramWidget\";\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts"],"sourceRoot":""}