!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("lodash"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","_","react-dom"],e):"object"==typeof exports?exports["storm-react-diagrams"]=e(require("react"),require("lodash"),require("react-dom")):t["storm-react-diagrams"]=e(t.React,t._,t.ReactDOM)}(this,function(t,e,n){return function(t){function __webpack_require__(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,__webpack_require__),o.l=!0,o.exports}var e={};return __webpack_require__.m=t,__webpack_require__.c=e,__webpack_require__.i=function(t){return t},__webpack_require__.d=function(t,e,n){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},__webpack_require__.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=41)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=n(4),r=n(1),a=function(t){function BaseModel(e){var n=t.call(this,e)||this;return n.selected=!1,n}return o(BaseModel,t),BaseModel.prototype.deSerialize=function(e){t.prototype.deSerialize.call(this,e),this.selected=e.selected},BaseModel.prototype.serialize=function(){return r.merge(t.prototype.serialize.call(this),{_class:this.constructor.name,selected:this.selected})},BaseModel.prototype.getID=function(){return this.id},BaseModel.prototype.isSelected=function(){return this.selected},BaseModel.prototype.setSelected=function(t){var e=this;void 0===t&&(t=!0),this.selected=t,this.iterateListeners(function(n){n.selectionChanged&&n.selectionChanged(e,t)})},BaseModel.prototype.remove=function(){var t=this;this.iterateListeners(function(e){e.entityRemoved&&e.entityRemoved(t)})},BaseModel}(i.BaseEntity);e.BaseModel=a;var s=function(t){function PointModel(e,n){var o=t.call(this)||this;return o.x=n.x,o.y=n.y,o.link=e,o}return o(PointModel,t),PointModel.prototype.deSerialize=function(e){t.prototype.deSerialize.call(this,e),this.x=e.x,this.y=e.y},PointModel.prototype.serialize=function(){return r.merge(t.prototype.serialize.call(this),{x:this.x,y:this.y})},PointModel.prototype.remove=function(){t.prototype.remove.call(this),this.link&&this.link.removePoint(this)},PointModel.prototype.updateLocation=function(t){this.x=t.x,this.y=t.y},PointModel.prototype.getX=function(){return this.x},PointModel.prototype.getY=function(){return this.y},PointModel.prototype.getLink=function(){return this.link},PointModel}(a);e.PointModel=s;var c=function(t){function LinkModel(){var e=t.call(this)||this;return e.linkType="default",e.points=[new s(e,{x:0,y:0}),new s(e,{x:0,y:0})],e.extras={},e.sourcePort=null,e.targetPort=null,e}return o(LinkModel,t),LinkModel.prototype.deSerialize=function(e){var n=this;t.prototype.deSerialize.call(this,e),this.linkType=e.type,this.points=r.map(e.points,function(t){var e=new s(n,{x:t.x,y:t.y});return e.deSerialize(t),e})},LinkModel.prototype.serialize=function(){return r.merge(t.prototype.serialize.call(this),{type:this.linkType,source:this.sourcePort?this.sourcePort.getParent().id:null,sourcePort:this.sourcePort?this.sourcePort.id:null,target:this.targetPort?this.targetPort.getParent().id:null,targetPort:this.targetPort?this.targetPort.id:null,points:r.map(this.points,function(t){return t.serialize()}),extras:this.extras})},LinkModel.prototype.remove=function(){t.prototype.remove.call(this),this.sourcePort&&this.sourcePort.removeLink(this),this.targetPort&&this.targetPort.removeLink(this)},LinkModel.prototype.isLastPoint=function(t){var e=this.getPointIndex(t);return e===this.points.length-1},LinkModel.prototype.getPointIndex=function(t){return this.points.indexOf(t)},LinkModel.prototype.getPointModel=function(t){for(var e=0;e<this.points.length;e++)if(this.points[e].id===t)return this.points[e];return null},LinkModel.prototype.getFirstPoint=function(){return this.points[0]},LinkModel.prototype.getLastPoint=function(){return this.points[this.points.length-1]},LinkModel.prototype.setSourcePort=function(t){var e=this;t.addLink(this),this.sourcePort=t,this.iterateListeners(function(n){n.sourcePortChanged&&n.sourcePortChanged(e,t)})},LinkModel.prototype.getSourcePort=function(){return this.sourcePort},LinkModel.prototype.getTargetPort=function(){return this.targetPort},LinkModel.prototype.setTargetPort=function(t){var e=this;t.addLink(this),this.targetPort=t,this.iterateListeners(function(n){n.targetPortChanged&&n.targetPortChanged(e,t)})},LinkModel.prototype.getPoints=function(){return this.points},LinkModel.prototype.setPoints=function(t){this.points=t},LinkModel.prototype.removePoint=function(t){this.points.splice(this.getPointIndex(t),1)},LinkModel.prototype.addPoint=function(t,e){void 0===e&&(e=1),this.points.splice(e,0,t)},LinkModel.prototype.getType=function(){return this.linkType},LinkModel}(a);e.LinkModel=c;var d=function(t){function PortModel(e,n){var o=t.call(this,n)||this;return o.name=e,o.links={},o.parentNode=null,o}return o(PortModel,t),PortModel.prototype.deSerialize=function(e){t.prototype.deSerialize.call(this,e),this.name=e.name},PortModel.prototype.serialize=function(){return r.merge(t.prototype.serialize.call(this),{name:this.name,parentNode:this.parentNode.id,links:r.map(this.links,function(t){return t.id})})},PortModel.prototype.getName=function(){return this.name},PortModel.prototype.getParent=function(){return this.parentNode},PortModel.prototype.setParentNode=function(t){this.parentNode=t},PortModel.prototype.removeLink=function(t){delete this.links[t.getID()]},PortModel.prototype.addLink=function(t){this.links[t.getID()]=t},PortModel.prototype.getLinks=function(){return this.links},PortModel}(a);e.PortModel=d;var l=function(t){function NodeModel(e,n){void 0===e&&(e="default");var o=t.call(this,n)||this;return o.nodeType=e,o.x=0,o.y=0,o.extras={},o.ports={},o}return o(NodeModel,t),NodeModel.prototype.deSerialize=function(e){t.prototype.deSerialize.call(this,e),this.nodeType=e.type,this.x=e.x,this.y=e.y,this.extras=e.extras},NodeModel.prototype.serialize=function(){return r.merge(t.prototype.serialize.call(this),{type:this.nodeType,x:this.x,y:this.y,extras:this.extras,ports:r.map(this.ports,function(t){return t.serialize()})})},NodeModel.prototype.remove=function(){t.prototype.remove.call(this);for(var e in this.ports)r.forEach(this.ports[e].getLinks(),function(t){t.remove()})},NodeModel.prototype.getPortFromID=function(t){for(var e in this.ports)if(this.ports[e].id===t)return this.ports[e];return null},NodeModel.prototype.getPort=function(t){return this.ports[t]},NodeModel.prototype.getPorts=function(){return this.ports},NodeModel.prototype.removePort=function(t){this.ports[t.name]&&(this.ports[t.name].setParentNode(null),delete this.ports[t.name])},NodeModel.prototype.addPort=function(t){return t.setParentNode(this),this.ports[t.name]=t,t},NodeModel.prototype.getType=function(){return this.nodeType},NodeModel}(a);e.NodeModel=l},function(t,e,n){"use strict";var o=function(){function AbstractInstanceFactory(t){this.className=t}return AbstractInstanceFactory.prototype.getName=function(){return this.className},AbstractInstanceFactory}();e.AbstractInstanceFactory=o},function(t,e,n){"use strict";var o=n(8),i=function(){function BaseListener(){}return BaseListener}();e.BaseListener=i;var r=function(){function BaseEntity(t){this.listeners={},this.id=t||o.Toolkit.UID(),this.locked=!1}return BaseEntity.prototype.getID=function(){return this.id},BaseEntity.prototype.clearListeners=function(){this.listeners={}},BaseEntity.prototype.deSerialize=function(t){this.id=t.id},BaseEntity.prototype.serialize=function(){return{id:this.id}},BaseEntity.prototype.iterateListeners=function(t){for(var e in this.listeners)t(this.listeners[e])},BaseEntity.prototype.removeListener=function(t){return!!this.listeners[t]&&(delete this.listeners[t],!0)},BaseEntity.prototype.addListener=function(t){var e=o.Toolkit.UID();return this.listeners[e]=t,e},BaseEntity.prototype.isLocked=function(){return this.locked},BaseEntity.prototype.setLocked=function(t){var e=this;void 0===t&&(t=!0),this.locked=t,this.iterateListeners(function(n){n.lockChanged&&n.lockChanged(e,t)})},BaseEntity}();e.BaseEntity=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=function(){function WidgetFactory(t){this.type=t}return WidgetFactory.prototype.getType=function(){return this.type},WidgetFactory}();e.WidgetFactory=i;var r=function(t){function NodeWidgetFactory(){return null!==t&&t.apply(this,arguments)||this}return o(NodeWidgetFactory,t),NodeWidgetFactory}(i);e.NodeWidgetFactory=r;var a=function(t){function LinkWidgetFactory(){return null!==t&&t.apply(this,arguments)||this}return o(LinkWidgetFactory,t),LinkWidgetFactory}(i);e.LinkWidgetFactory=a},function(t,e,n){"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}__export(n(24)),__export(n(9)),__export(n(25)),__export(n(10)),__export(n(26)),__export(n(27)),__export(n(11)),__export(n(5)),__export(n(8)),__export(n(22)),__export(n(7)),__export(n(4)),__export(n(2)),__export(n(3)),__export(n(23)),__export(n(28)),__export(n(12)),__export(n(13)),__export(n(14)),__export(n(15)),__export(n(16))},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=n(2),r=n(4),a=n(1),s=function(t){function DiagramModel(){var e=t.call(this)||this;return e.links={},e.nodes={},e.offsetX=0,e.offsetY=0,e.zoom=100,e.rendered=!1,e}return o(DiagramModel,t),DiagramModel.prototype.deSerializeDiagram=function(t,e){var n=this;this.deSerialize(t),this.offsetX=t.offsetX,this.offsetY=t.offsetY,this.zoom=t.zoom,a.forEach(t.nodes,function(t){var o=e.getInstanceFactory(t._class).getInstance(t);o.deSerialize(t),a.forEach(t.ports,function(t){var n=e.getInstanceFactory(t._class).getInstance();n.deSerialize(t),o.addPort(n)}),n.addNode(o)}),a.forEach(t.links,function(t){var o=e.getInstanceFactory(t._class).getInstance();o.deSerialize(t),t.target&&o.setTargetPort(n.getNode(t.target).getPortFromID(t.targetPort)),t.source&&o.setSourcePort(n.getNode(t.source).getPortFromID(t.sourcePort)),n.addLink(o)})},DiagramModel.prototype.serializeDiagram=function(){return a.merge(this.serialize(),{offsetX:this.offsetX,offsetY:this.offsetY,zoom:this.zoom,links:a.map(this.links,function(t){return t.serialize()}),nodes:a.map(this.nodes,function(t){return t.serialize()})})},DiagramModel.prototype.clearSelection=function(t){void 0===t&&(t=null),a.forEach(this.getSelectedItems(),function(e){t&&t.getID()===e.getID()||e.setSelected(!1)})},DiagramModel.prototype.getSelectedItems=function(){var t=[];return t=t.concat(a.filter(this.nodes,function(t){return t.isSelected()})),t=t.concat(a.filter(a.flatMap(this.links,function(t){return t.points}),function(t){return t.isSelected()})),t.concat(a.filter(this.links,function(t){return t.isSelected()}))},DiagramModel.prototype.setZoomLevel=function(t){var e=this;this.zoom=t,this.iterateListeners(function(t){t.controlsUpdated&&t.controlsUpdated()}),this.iterateListeners(function(t){t.zoomUpdated&&t.zoomUpdated(e,e.zoom)})},DiagramModel.prototype.setOffset=function(t,e){var n=this;this.offsetX=t,this.offsetY=e,this.iterateListeners(function(t){t.controlsUpdated&&t.controlsUpdated()}),this.iterateListeners(function(t){t.offsetUpdated&&t.offsetUpdated(n,n.offsetX,n.offsetY)})},DiagramModel.prototype.setOffsetX=function(t){var e=this;this.offsetX=t,this.iterateListeners(function(t){t.controlsUpdated&&t.controlsUpdated()}),this.iterateListeners(function(t){t.offsetUpdated&&t.offsetUpdated(e,e.offsetX,e.offsetY)})},DiagramModel.prototype.setOffsetY=function(t){var e=this;this.offsetX=t,this.iterateListeners(function(t){t.controlsUpdated&&t.controlsUpdated()}),this.iterateListeners(function(t){t.offsetUpdated&&t.offsetUpdated(e,e.offsetX,e.offsetY)})},DiagramModel.prototype.getOffsetY=function(){return this.offsetY},DiagramModel.prototype.getOffsetX=function(){return this.offsetX},DiagramModel.prototype.getZoomLevel=function(){return this.zoom},DiagramModel.prototype.getNode=function(t){return t instanceof i.NodeModel?t:this.nodes[t]?this.nodes[t]:null},DiagramModel.prototype.getLink=function(t){return t instanceof i.LinkModel?t:this.links[t]?this.links[t]:null},DiagramModel.prototype.addLink=function(t){var e=this;return t.addListener({entityRemoved:function(){e.removeLink(t)}}),this.links[t.getID()]=t,this.iterateListeners(function(e){e.linksUpdated&&e.linksUpdated(t,!0)}),t},DiagramModel.prototype.addNode=function(t){var e=this;return t.addListener({entityRemoved:function(){e.removeNode(t)}}),this.nodes[t.getID()]=t,this.iterateListeners(function(e){e.nodesUpdated&&e.nodesUpdated(t,!0)}),t},DiagramModel.prototype.removeLink=function(t){return t instanceof i.LinkModel?(delete this.links[t.getID()],void this.iterateListeners(function(e){e.linksUpdated&&e.linksUpdated(t,!1)})):(delete this.links[""+t],void this.iterateListeners(function(e){e.linksUpdated&&e.linksUpdated(t,!1)}))},DiagramModel.prototype.removeNode=function(t){return t instanceof i.NodeModel?(delete this.nodes[t.getID()],void this.iterateListeners(function(e){e.nodesUpdated&&e.nodesUpdated(t,!1)})):(delete this.nodes[""+t],void this.iterateListeners(function(e){e.nodesUpdated&&e.nodesUpdated(t,!1)}))},DiagramModel.prototype.getLinks=function(){return this.links},DiagramModel.prototype.getNodes=function(){return this.nodes},DiagramModel}(r.BaseEntity);e.DiagramModel=s},function(t,e,n){"use strict";var o=function(){function Toolkit(){}return Toolkit.UID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)})},Toolkit}();e.Toolkit=o},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=n(0),r=n(2),a=n(1),s=function(t){function DefaultLinkWidget(e){var n=t.call(this,e)||this;return n.state={selected:!1},n}return o(DefaultLinkWidget,t),DefaultLinkWidget.prototype.generatePoint=function(t){var e=this;return i.DOM.g({key:"point-"+this.props.link.points[t].id},i.DOM.circle({className:"point pointui"+(this.props.link.points[t].isSelected()?" selected":""),cx:this.props.link.points[t].x,cy:this.props.link.points[t].y,r:5}),i.DOM.circle({className:"point","data-linkid":this.props.link.id,"data-id":this.props.link.points[t].id,cx:this.props.link.points[t].x,cy:this.props.link.points[t].y,r:15,opacity:0,onMouseLeave:function(){e.setState({selected:!1})},onMouseEnter:function(){e.setState({selected:!0})}}))},DefaultLinkWidget.prototype.generateLink=function(t){var e=this,n=i.DOM.path(a.merge({className:this.state.selected||this.props.link.isSelected()?"selected":"",strokeWidth:this.props.width,stroke:this.props.color},t)),o=i.DOM.path(a.merge({strokeLinecap:"round",onMouseLeave:function(){e.setState({selected:!1})},onMouseEnter:function(){e.setState({selected:!0})},"data-linkid":this.props.link.getID(),stroke:this.props.color,strokeOpacity:this.state.selected?.1:0,strokeWidth:20,onContextMenu:function(t){t.preventDefault(),e.props.link.remove()}},t));return i.DOM.g({key:"link-"+t.id},n,o)},DefaultLinkWidget.prototype.render=function(){var t=this,e=this.props.link.points,n=[];if(2===e.length){var o=50;Math.abs(e[0].x-e[1].x)<50&&(o=5);var a=e[0],s=e[1];a.x>s.x&&(a=e[1],s=e[0]),n.push(this.generateLink({id:0,onMouseDown:function(e){if(!e.shiftKey&&!t.props.diagramEngine.isModelLocked(t.props.link)){var n=new r.PointModel(t.props.link,t.props.diagramEngine.getRelativeMousePoint(e));n.setSelected(!0),t.forceUpdate(),t.props.link.addPoint(n,1),t.props.pointAdded(n,e)}},d:" M"+a.x+" "+a.y+" C"+(a.x+o)+" "+a.y+" "+(s.x-o)+" "+s.y+" "+s.x+" "+s.y})),null===this.props.link.targetPort&&n.push(this.generatePoint(1))}else{var c=[];if(this.props.smooth){c.push(" M"+e[0].x+" "+e[0].y+" C "+(e[0].x+50)+" "+e[0].y+" "+e[1].x+" "+e[1].y+" "+e[1].x+" "+e[1].y);for(var d=1;d<e.length-2;d++)c.push(" M "+e[d].x+" "+e[d].y+" L "+e[d+1].x+" "+e[d+1].y);c.push(" M"+e[d].x+" "+e[d].y+" C "+e[d].x+" "+e[d].y+" "+(e[d+1].x-50)+" "+e[d+1].y+" "+e[d+1].x+" "+e[d+1].y)}else for(var c=[],d=0;d<e.length-1;d++)c.push(" M "+e[d].x+" "+e[d].y+" L "+e[d+1].x+" "+e[d+1].y);n=c.map(function(e,n){return t.generateLink({id:n,"data-linkid":t.props.link.id,"data-point":n,onMouseDown:function(e){if(!e.shiftKey){var o=new r.PointModel(t.props.link,t.props.diagramEngine.getRelativeMousePoint(e));o.setSelected(!0),t.forceUpdate(),t.props.link.addPoint(o,n+1),t.props.pointAdded(o,e)}},d:e})});for(var d=1;d<e.length-1;d++)n.push(this.generatePoint(d));null===this.props.link.targetPort&&n.push(this.generatePoint(e.length-1))}return i.DOM.g(null,n)},DefaultLinkWidget}(i.Component);s.defaultProps={color:"black",width:3,link:null,engine:null,smooth:!1,diagramEngine:null},e.DefaultLinkWidget=s},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=n(0),r=n(1),a=i.DOM.div,s=n(11),c=function(t){function DefaultNodeWidget(e){var n=t.call(this,e)||this;return n.state={},n}return o(DefaultNodeWidget,t),DefaultNodeWidget.prototype.render=function(){var t=this;return a({className:"basic-node",style:{background:this.props.node.color}},a({className:"title"},a({className:"name"},this.props.node.name),a({className:"fa fa-close",onClick:function(){t.props.node.remove(),t.props.diagramEngine.repaintCanvas()}})),a({className:"ports"},a({className:"in"},r.map(this.props.node.getInPorts(),function(t){return i.createElement(s.DefaultPortLabel,{model:t,key:t.id})})),a({className:"out"},r.map(this.props.node.getOutPorts(),function(t){return i.createElement(s.DefaultPortLabel,{model:t,key:t.id})}))))},DefaultNodeWidget}(i.Component);e.DefaultNodeWidget=c},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=n(0),r=n(16),a=function(t){function DefaultPortLabel(){return null!==t&&t.apply(this,arguments)||this}return o(DefaultPortLabel,t),DefaultPortLabel.prototype.render=function(){var t=i.createElement(r.PortWidget,{name:this.props.model.name,node:this.props.model.getParent()}),e=i.DOM.div({className:"name"},this.props.model.label);return i.DOM.div({className:(this.props.model.in?"in":"out")+"-port"},this.props.model.in?t:e,this.props.model.in?e:t)},DefaultPortLabel}(i.Component);a.defaultProps={in:!0,label:"port"},e.DefaultPortLabel=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=n(0),r=n(13),a=n(1),s=function(t){function LinkLayerWidget(e){var n=t.call(this,e)||this;return n.state={},n}return o(LinkLayerWidget,t),LinkLayerWidget.prototype.render=function(){var t=this,e=this.props.diagramEngine.getDiagramModel();return i.DOM.svg({style:{transform:"scale("+e.getZoomLevel()/100+") translate("+e.getOffsetX()+"px,"+e.getOffsetY()+"px)",width:"100%",height:"100%"}},a.map(e.getLinks(),function(n){if(null!==n.sourcePort)try{n.points[0].updateLocation(t.props.diagramEngine.getPortCenter(n.sourcePort))}catch(t){return console.log(t),void e.removeLink(n)}if(null!==n.targetPort)try{a.last(n.points).updateLocation(t.props.diagramEngine.getPortCenter(n.targetPort))}catch(t){return console.log(t),void e.removeLink(n)}var o=t.props.diagramEngine.generateWidgetForLink(n);return o?i.createElement(r.LinkWidget,{key:n.getID(),link:n,diagramEngine:t.props.diagramEngine},i.cloneElement(o,{pointAdded:t.props.pointAdded})):(console.log("no link generated for type: "+n.getType()),null)}))},LinkLayerWidget}(i.Component);e.LinkLayerWidget=s},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=n(0),r=function(t){function LinkWidget(e){var n=t.call(this,e)||this;return n.state={},n}return o(LinkWidget,t),LinkWidget.prototype.shouldComponentUpdate=function(){return this.props.diagramEngine.canEntityRepaint(this.props.link)},LinkWidget.prototype.render=function(){return this.props.children},LinkWidget}(i.Component);e.LinkWidget=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=n(0),r=n(1),a=n(15),s=function(t){function NodeLayerWidget(e){var n=t.call(this,e)||this;return n.state={},n}return o(NodeLayerWidget,t),NodeLayerWidget.prototype.render=function(){var t=this,e=this.props.diagramEngine.getDiagramModel();return i.DOM.div({className:"node-view",style:{transform:"scale("+e.getZoomLevel()/100+") translate("+e.getOffsetX()+"px,"+e.getOffsetY()+"px)",width:"100%",height:"100%"}},r.map(e.getNodes(),function(e){return i.createElement(a.NodeWidget,{diagramEngine:t.props.diagramEngine,key:e.id,node:e},t.props.diagramEngine.generateWidgetForNode(e))}))},NodeLayerWidget}(i.Component);e.NodeLayerWidget=s},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=n(0),r=function(t){function NodeWidget(e){var n=t.call(this,e)||this;return n.state={},n}return o(NodeWidget,t),NodeWidget.prototype.shouldComponentUpdate=function(){return this.props.diagramEngine.canEntityRepaint(this.props.node)},NodeWidget.prototype.render=function(){return i.DOM.div({"data-nodeid":this.props.node.id,className:"node"+(this.props.node.isSelected()?" selected":""),style:{top:this.props.node.y,left:this.props.node.x}},i.cloneElement(this.props.children,{}))},NodeWidget}(i.Component);e.NodeWidget=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=n(0),r=function(t){function PortWidget(e){var n=t.call(this,e)||this;return n.state={selected:!1},n}return o(PortWidget,t),PortWidget.prototype.render=function(){var t=this;return i.DOM.div({onMouseEnter:function(){t.setState({selected:!0})},onMouseLeave:function(){t.setState({selected:!1})},className:"port"+(this.state.selected?" selected":""),"data-name":this.props.name,"data-nodeid":this.props.node.getID()})},PortWidget}(i.Component);e.PortWidget=r},,function(t,e){t.exports=n},,function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(o[r]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&o[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(t,e){function addStylesToDom(t,e){for(var o=0;o<t.length;o++){var i=t[o],r=n[i.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](i.parts[a]);for(;a<i.parts.length;a++)r.parts.push(addStyle(i.parts[a],e))}else{for(var s=[],a=0;a<i.parts.length;a++)s.push(addStyle(i.parts[a],e));n[i.id]={id:i.id,refs:1,parts:s}}}}function listToStyles(t){for(var e=[],n={},o=0;o<t.length;o++){var i=t[o],r=i[0],a=i[1],s=i[2],c=i[3],d={css:a,media:s,sourceMap:c};n[r]?n[r].parts.push(d):e.push(n[r]={id:r,parts:[d]})}return e}function insertStyleElement(t,e){var n=r(),o=c[c.length-1];if("top"===t.insertAt)o?o.nextSibling?n.insertBefore(e,o.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),c.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function removeStyleElement(t){t.parentNode.removeChild(t);var e=c.indexOf(t);e>=0&&c.splice(e,1)}function createStyleElement(t){var e=document.createElement("style");return e.type="text/css",insertStyleElement(t,e),e}function createLinkElement(t){var e=document.createElement("link");return e.rel="stylesheet",insertStyleElement(t,e),e}function addStyle(t,e){var n,o,i;if(e.singleton){var r=s++;n=a||(a=createStyleElement(e)),o=applyToSingletonTag.bind(null,n,r,!1),i=applyToSingletonTag.bind(null,n,r,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=createLinkElement(e),o=updateLink.bind(null,n),i=function(){removeStyleElement(n),n.href&&URL.revokeObjectURL(n.href)}):(n=createStyleElement(e),o=applyToTag.bind(null,n),i=function(){removeStyleElement(n)});return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else i()}}function applyToSingletonTag(t,e,n,o){var i=n?"":o.css;if(t.styleSheet)t.styleSheet.cssText=d(e,i);else{var r=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}function applyToTag(t,e){var n=e.css,o=e.media;if(o&&t.setAttribute("media",o),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function updateLink(t,e){var n=e.css,o=e.sourceMap;o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var i=new Blob([n],{type:"text/css"}),r=t.href;t.href=URL.createObjectURL(i),r&&URL.revokeObjectURL(r)}var n={},o=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},i=o(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),r=o(function(){return document.head||document.getElementsByTagName("head")[0]}),a=null,s=0,c=[];t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},"undefined"==typeof e.singleton&&(e.singleton=i()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var o=listToStyles(t);return addStylesToDom(o,e),function(t){for(var i=[],r=0;r<o.length;r++){var a=o[r],s=n[a.id];s.refs--,i.push(s)}if(t){var c=listToStyles(t);addStylesToDom(c,e)}for(var r=0;r<i.length;r++){var s=i[r];if(0===s.refs){for(var d=0;d<s.parts.length;d++)s.parts[d]();delete n[s.id]}}}};var d=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=n(2),r=n(4),a=n(7),s=n(1),c=function(t){function DiagramEngine(){var e=t.call(this)||this;return e.diagramModel=new a.DiagramModel,e.nodeFactories={},e.linkFactories={},e.instanceFactories={},e.canvas=null,e.paintableWidgets=null,e}return o(DiagramEngine,t),DiagramEngine.prototype.repaintCanvas=function(){this.iterateListeners(function(t){t.repaintCanvas&&t.repaintCanvas()})},DiagramEngine.prototype.clearRepaintEntities=function(){this.paintableWidgets=null},DiagramEngine.prototype.enableRepaintEntities=function(t){var e=this;this.paintableWidgets={},t.forEach(function(t){t instanceof i.NodeModel&&s.forEach(t.getPorts(),function(t){s.forEach(t.getLinks(),function(t){e.paintableWidgets[t.getID()]=!0})}),t instanceof i.PointModel&&(e.paintableWidgets[t.getLink().getID()]=!0),e.paintableWidgets[t.getID()]=!0})},DiagramEngine.prototype.isModelLocked=function(t){return!!this.diagramModel.isLocked()||(!!(t instanceof i.PointModel&&t.getLink().isLocked())||t.isLocked())},DiagramEngine.prototype.canEntityRepaint=function(t){return null===this.paintableWidgets||void 0!==this.paintableWidgets[t.getID()]},DiagramEngine.prototype.setCanvas=function(t){this.canvas=t},DiagramEngine.prototype.setDiagramModel=function(t){this.diagramModel=t},DiagramEngine.prototype.getDiagramModel=function(){return this.diagramModel},DiagramEngine.prototype.getNodeFactories=function(){return this.nodeFactories},DiagramEngine.prototype.getLinkFactories=function(){return this.linkFactories},DiagramEngine.prototype.getInstanceFactory=function(t){return this.instanceFactories[t]},DiagramEngine.prototype.registerInstanceFactory=function(t){this.instanceFactories[t.getName()]=t},DiagramEngine.prototype.registerNodeFactory=function(t){this.nodeFactories[t.getType()]=t,this.iterateListeners(function(t){t.nodeFactoriesUpdated&&t.nodeFactoriesUpdated()})},DiagramEngine.prototype.registerLinkFactory=function(t){this.linkFactories[t.getType()]=t,this.iterateListeners(function(t){t.linkFactoriesUpdated&&t.linkFactoriesUpdated()})},DiagramEngine.prototype.getFactoryForNode=function(t){return this.nodeFactories[t.getType()]?this.nodeFactories[t.getType()]:(console.log("cannot find widget factory for node of type: ["+t.getType()+"]"),null)},DiagramEngine.prototype.getFactoryForLink=function(t){return this.linkFactories[t.getType()]?this.linkFactories[t.getType()]:(console.log("cannot find widget factory for link of type: ["+t.getType()+"]"),null)},DiagramEngine.prototype.generateWidgetForLink=function(t){var e=this.getFactoryForLink(t);if(!e)throw"Cannot find link factory for link: "+t.getType();return e.generateReactWidget(this,t)},DiagramEngine.prototype.generateWidgetForNode=function(t){var e=this.getFactoryForNode(t);if(!e)throw"Cannot find widget factory for node: "+t.getType();return e.generateReactWidget(this,t)},DiagramEngine.prototype.getRelativeMousePoint=function(t){var e=this.getRelativePoint(t.pageX,t.pageY);return{x:e.x/(this.diagramModel.getZoomLevel()/100)-this.diagramModel.getOffsetX(),y:e.y/(this.diagramModel.getZoomLevel()/100)-this.diagramModel.getOffsetY()}},DiagramEngine.prototype.getRelativePoint=function(t,e){var n=this.canvas.getBoundingClientRect();return{x:t-n.left,y:e-n.top}},DiagramEngine.prototype.getNodePortElement=function(t){var e=this.canvas.querySelector('.port[data-name="'+t.getName()+'"][data-nodeid="'+t.getParent().getID()+'"]');if(null===e)throw"Cannot find Node Port element with nodeID: ["+t.getParent().getID()+"] and name: ["+t.getName()+"]";return e},DiagramEngine.prototype.getPortCenter=function(t){var e=this.getNodePortElement(t),n=e.getBoundingClientRect(),o=this.getRelativePoint(n.left,n.top);return{x:e.offsetWidth/2+o.x/(this.diagramModel.getZoomLevel()/100)-this.diagramModel.getOffsetX(),y:e.offsetHeight/2+o.y/(this.diagramModel.getZoomLevel()/100)-this.diagramModel.getOffsetY()}},DiagramEngine}(r.BaseEntity);e.DiagramEngine=c},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=n(2),r=n(3),a=function(t){function LinkInstanceFactory(){
return t.call(this,"LinkModel")||this}return o(LinkInstanceFactory,t),LinkInstanceFactory.prototype.getInstance=function(){return new i.LinkModel},LinkInstanceFactory}(r.AbstractInstanceFactory);e.LinkInstanceFactory=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=n(5),r=n(0),a=n(9),s=function(t){function DefaultLinkFactory(){return t.call(this,"default")||this}return o(DefaultLinkFactory,t),DefaultLinkFactory.prototype.generateReactWidget=function(t,e){return r.createElement(a.DefaultLinkWidget,{link:e,diagramEngine:t})},DefaultLinkFactory}(i.LinkWidgetFactory);e.DefaultLinkFactory=s},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=n(5),r=n(0),a=n(10),s=function(t){function DefaultNodeFactory(){return t.call(this,"default")||this}return o(DefaultNodeFactory,t),DefaultNodeFactory.prototype.generateReactWidget=function(t,e){return r.createElement(a.DefaultNodeWidget,{node:e,diagramEngine:t})},DefaultNodeFactory}(i.NodeWidgetFactory);e.DefaultNodeFactory=s},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=n(2),r=n(1),a=n(3),s=function(t){function DefaultNodeInstanceFactory(){return t.call(this,"DefaultNodeModel")||this}return o(DefaultNodeInstanceFactory,t),DefaultNodeInstanceFactory.prototype.getInstance=function(){return new c},DefaultNodeInstanceFactory}(a.AbstractInstanceFactory);e.DefaultNodeInstanceFactory=s;var c=function(t){function DefaultNodeModel(e,n){void 0===e&&(e="Untitled"),void 0===n&&(n="rgb(0,192,255)");var o=t.call(this,"default")||this;return o.name=e,o.color=n,o}return o(DefaultNodeModel,t),DefaultNodeModel.prototype.deSerialize=function(e){t.prototype.deSerialize.call(this,e),this.name=e.name,this.color=e.color},DefaultNodeModel.prototype.serialize=function(){return r.merge(t.prototype.serialize.call(this),{name:this.name,color:this.color})},DefaultNodeModel.prototype.getInPorts=function(){return r.filter(this.ports,function(t){return t.in})},DefaultNodeModel.prototype.getOutPorts=function(){return r.filter(this.ports,function(t){return!t.in})},DefaultNodeModel}(i.NodeModel);e.DefaultNodeModel=c},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=n(2),r=n(1),a=n(3),s=function(t){function DefaultPortInstanceFactory(){return t.call(this,"DefaultPortModel")||this}return o(DefaultPortInstanceFactory,t),DefaultPortInstanceFactory.prototype.getInstance=function(){return new c(!0,"unknown")},DefaultPortInstanceFactory}(a.AbstractInstanceFactory);e.DefaultPortInstanceFactory=s;var c=function(t){function DefaultPortModel(e,n,o,i){void 0===o&&(o=null);var r=t.call(this,n,i)||this;return r.in=e,r.label=o||n,r}return o(DefaultPortModel,t),DefaultPortModel.prototype.deSerialize=function(e){t.prototype.deSerialize.call(this,e),this.in=e.in,this.label=e.label},DefaultPortModel.prototype.serialize=function(){return r.merge(t.prototype.serialize.call(this),{in:this.in,label:this.label})},DefaultPortModel}(i.PortModel);e.DefaultPortModel=c},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=n(0),r=n(1),a=n(2),s=n(12),c=n(14),d=function(){function BaseAction(t,e){this.mouseX=t,this.mouseY=e,this.ms=(new Date).getTime()}return BaseAction}();e.BaseAction=d;var l=function(t){function SelectingAction(e,n){var o=t.call(this,e,n)||this;return o.mouseX2=e,o.mouseY2=n,o}return o(SelectingAction,t),SelectingAction.prototype.containsElement=function(t,e,n){var o=n.getZoomLevel()/100;return(t+n.getOffsetX())*o>this.mouseX&&(t+n.getOffsetX())*o<this.mouseX2&&(e+n.getOffsetY())*o>this.mouseY&&(e+n.getOffsetY())*o<this.mouseY2},SelectingAction}(d);e.SelectingAction=l;var p=function(t){function MoveCanvasAction(e,n,o){var i=t.call(this,e,n)||this;return i.initialOffsetX=o.getOffsetX(),i.initialOffsetY=o.getOffsetY(),i}return o(MoveCanvasAction,t),MoveCanvasAction}(d);e.MoveCanvasAction=p;var u=function(t){function MoveItemsAction(e,n,o){var i=t.call(this,e,n)||this;i.moved=!1,o.enableRepaintEntities(o.getDiagramModel().getSelectedItems());var r=o.getDiagramModel().getSelectedItems();return r=r.filter(function(t){return!o.isModelLocked(t)}),i.selectionModels=r.map(function(t){return{model:t,initialX:t.x,initialY:t.y}}),i}return o(MoveItemsAction,t),MoveItemsAction}(d);e.MoveItemsAction=u;var f=function(t){function DiagramWidget(e){var n=t.call(this,e)||this;return n.state={action:null,renderedNodes:!1,windowListener:null,diagramEngineListener:null},n}return o(DiagramWidget,t),DiagramWidget.prototype.componentWillMount=function(){var t=this;this.setState({diagramEngineListener:this.props.diagramEngine.addListener({repaintCanvas:function(){t.forceUpdate()}})})},DiagramWidget.prototype.componentWillUnmount=function(){this.props.diagramEngine.removeListener(this.state.diagramEngineListener),this.props.diagramEngine.setCanvas(null),window.removeEventListener("keyup",this.state.windowListener)},DiagramWidget.prototype.componentWillUpdate=function(t){this.props.diagramEngine.diagramModel.id!==t.diagramEngine.diagramModel.id&&(this.setState({renderedNodes:!1}),t.diagramEngine.diagramModel.rendered=!0),t.diagramEngine.diagramModel.rendered||(this.setState({renderedNodes:!1}),t.diagramEngine.diagramModel.rendered=!0)},DiagramWidget.prototype.componentDidUpdate=function(){this.state.renderedNodes||this.setState({renderedNodes:!0})},DiagramWidget.prototype.componentDidMount=function(){var t=this;this.props.diagramEngine.setCanvas(this.refs.canvas),this.setState({renderedNodes:!0,windowListener:window.addEventListener("keyup",function(e){46!==e.keyCode&&8!==e.keyCode||(r.forEach(t.props.diagramEngine.getDiagramModel().getSelectedItems(),function(e){t.props.diagramEngine.isModelLocked(e)||e.remove()}),t.forceUpdate())},!1)}),window.focus()},DiagramWidget.prototype.getMouseElement=function(t){var e=t.target,n=this.props.diagramEngine.diagramModel,o=e.closest(".port[data-name]");if(o){var i=e.closest(".node[data-nodeid]");return{model:n.getNode(i.getAttribute("data-nodeid")).getPort(o.getAttribute("data-name")),element:o}}return(o=e.closest(".point[data-id]"))?{model:n.getLink(o.getAttribute("data-linkid")).getPointModel(o.getAttribute("data-id")),element:o}:(o=e.closest("[data-linkid]"))?{model:n.getLink(o.getAttribute("data-linkid")),element:o}:(o=e.closest(".node[data-nodeid]"),o?{model:n.getNode(o.getAttribute("data-nodeid")),element:o}:null)},DiagramWidget.prototype.fireAction=function(){this.state.action&&this.props.actionStillFiring&&this.props.actionStillFiring(this.state.action)},DiagramWidget.prototype.stopFiringAction=function(){this.props.actionStoppedFiring&&this.props.actionStoppedFiring(this.state.action),this.setState({action:null})},DiagramWidget.prototype.startFiringAction=function(t){var e=!0;this.props.actionStartedFiring&&(e=this.props.actionStartedFiring(t)),e&&this.setState({action:t})},DiagramWidget.prototype.render=function(){var t=this,e=this.props.diagramEngine,n=e.getDiagramModel();return i.DOM.div({ref:"canvas",className:"storm-diagrams-canvas",onWheel:function(o){t.props.allowCanvasZoom&&(o.preventDefault(),o.stopPropagation(),n.setZoomLevel(n.getZoomLevel()+o.deltaY/60),e.enableRepaintEntities([]),t.forceUpdate(),setTimeout(function(){t.forceUpdate()},100))},onMouseMove:function(o){if(t.state.action instanceof l){var i=e.getRelativePoint(o.pageX,o.pageY);return r.forEach(n.getNodes(),function(e){t.state.action.containsElement(e.x,e.y,n)&&e.setSelected(!0)}),r.forEach(n.getLinks(),function(e){var o=!0;r.forEach(e.points,function(e){t.state.action.containsElement(e.x,e.y,n)?e.setSelected(!0):o=!1}),o&&e.setSelected(!0)}),t.state.action.mouseX2=i.x,t.state.action.mouseY2=i.y,t.fireAction(),void t.setState({action:t.state.action})}t.state.action instanceof u?(r.forEach(t.state.action.selectionModels,function(e){(e.model instanceof a.NodeModel||e.model instanceof a.PointModel)&&(e.model.x=e.initialX+(o.pageX-t.state.action.mouseX)/(n.getZoomLevel()/100),e.model.y=e.initialY+(o.pageY-t.state.action.mouseY)/(n.getZoomLevel()/100))}),t.fireAction(),t.forceUpdate()):t.state.action instanceof p&&t.props.allowCanvasTranslation&&(n.setOffset(t.state.action.initialOffsetX+(o.pageX-t.state.action.mouseX)/(n.getZoomLevel()/100),t.state.action.initialOffsetY+(o.pageY-t.state.action.mouseY)/(n.getZoomLevel()/100)),t.fireAction(),t.forceUpdate())},onMouseDown:function(o){e.clearRepaintEntities();var i=t.getMouseElement(o);if(null===i)if(o.shiftKey){var r=e.getRelativePoint(o.pageX,o.pageY);t.startFiringAction(new l(r.x,r.y))}else n.clearSelection(),t.startFiringAction(new p(o.pageX,o.pageY,n));else if(i.model instanceof a.PortModel){var r=e.getRelativeMousePoint(o),s=new a.LinkModel;s.setSourcePort(i.model),s.getFirstPoint().updateLocation(r),s.getLastPoint().updateLocation(r),n.clearSelection(),s.getLastPoint().setSelected(!0),n.addLink(s),t.startFiringAction(new u(o.pageX,o.pageY,e))}else o.shiftKey||i.model.isSelected()||n.clearSelection(),i.model.setSelected(!0),t.startFiringAction(new u(o.pageX,o.pageY,e))},onMouseUp:function(n){if(t.state.action instanceof u){var o=t.getMouseElement(n),i=!1;r.forEach(t.state.action.selectionModels,function(t){if(t.model instanceof a.PointModel&&o.model instanceof a.PortModel){i=!0;var e=t.model.getLink();e.setTargetPort(o.model)}}),i||t.props.allowLooseLinks||r.forEach(t.state.action.selectionModels,function(t){if(t.model instanceof a.PointModel){var e=t.model.getLink();e.isLastPoint(t.model)&&e.remove()}})}e.clearRepaintEntities(),t.stopFiringAction()}},this.state.renderedNodes?i.createElement(s.LinkLayerWidget,{diagramEngine:e,pointAdded:function(o,i){i.stopPropagation(),n.clearSelection(o),t.setState({action:new u(i.pageX,i.pageY,e)})}}):null,i.createElement(c.NodeLayerWidget,{diagramEngine:e}),this.state.action instanceof l?i.DOM.div({className:"selector",style:{top:this.state.action.mouseY,left:this.state.action.mouseX,width:this.state.action.mouseX2-this.state.action.mouseX,height:this.state.action.mouseY2-this.state.action.mouseY}}):null)},DiagramWidget}(i.Component);f.defaultProps={diagramEngine:null,allowLooseLinks:!0,allowCanvasTranslation:!0,allowCanvasZoom:!0},e.DiagramWidget=f},,,,,function(t,e,n){"use strict";var o=n(6),i=function(){function Application(){this.diagramEngine=new o.DiagramEngine,this.diagramEngine.registerNodeFactory(new o.DefaultNodeFactory),this.diagramEngine.registerLinkFactory(new o.DefaultLinkFactory),this.newModel()}return Application.prototype.newModel=function(){this.activeModel=new o.DiagramModel,this.diagramEngine.setDiagramModel(this.activeModel);var t=new o.DefaultNodeModel("Node 1","rgb(0,192,255)"),e=t.addPort(new o.DefaultPortModel(!1,"out-1","Out"));t.x=100,t.y=100;var n=new o.DefaultNodeModel("Node 2","rgb(192,255,0)"),i=n.addPort(new o.DefaultPortModel(!0,"in-1","IN"));n.x=400,n.y=100;var r=new o.LinkModel;r.setSourcePort(e),r.setTargetPort(i),this.activeModel.addNode(t),this.activeModel.addNode(n),this.activeModel.addLink(r)},Application.prototype.getActiveDiagram=function(){return this.activeModel},Application.prototype.getDiagramEngine=function(){return this.diagramEngine},Application}();e.Application=i},function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=n(0),r=n(36),a=n(6),s=function(t){function BodyWidget(e){var n=t.call(this,e)||this;return n.state={},n}return o(BodyWidget,t),BodyWidget.prototype.render=function(){return i.DOM.div({className:"body"},i.DOM.div({className:"header"},i.DOM.div({className:"title"},"Storm React Diagrams - Demo 5")),i.DOM.div({className:"content"},r.TrayWidgetFactory(),i.createElement(a.DiagramWidget,{diagramEngine:this.props.app.getDiagramEngine()})))},BodyWidget}(i.Component);e.BodyWidget=s,e.BodyWidgetFactory=i.createFactory(s)},,function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=n(0),r=function(t){function TrayWidget(e){var n=t.call(this,e)||this;return n.state={},n}return o(TrayWidget,t),TrayWidget.prototype.render=function(){return i.DOM.div({className:"tray"},this.props.children)},TrayWidget}(i.Component);r.defaultProps={},e.TrayWidget=r,e.TrayWidgetFactory=i.createFactory(r)},,,,,function(t,e,n){"use strict";var o=n(18),i=n(34),r=n(33);n(42),window.onload=function(){var t=new r.Application;o.render(i.BodyWidgetFactory({app:t}),document.body)}},function(t,e,n){var o=n(43);"string"==typeof o&&(o=[[t.i,o,""]]);n(21)(o,{});o.locals&&(t.exports=o.locals)},function(t,e,n){e=t.exports=n(20)(),e.push([t.i,"* {\n  margin: 0;\n  padding: 0; }\n\nhtml, body {\n  height: 100%; }\n\nbody {\n  display: flex;\n  background: #3c3c3c; }\n\n.body {\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column; }\n  .body .header {\n    display: flex;\n    background: #1e1e1e;\n    flex-grow: 0;\n    flex-shrink: 0;\n    color: white;\n    font-family: Helvetica, Arial;\n    padding: 10px; }\n    .body .header > * {\n      align-self: center; }\n  .body .content {\n    display: flex;\n    flex-grow: 1; }\n    .body .content .tray {\n      min-width: 200px;\n      background: #141414;\n      flex-grow: 0;\n      flex-shrink: 0; }\n\n.storm-diagrams-canvas {\n  background: rgba(0, 0, 0, 0.2);\n  background-image: linear-gradient(0deg, transparent 24%, rgba(255, 255, 255, 0.05) 25%, rgba(255, 255, 255, 0.05) 26%, transparent 27%, transparent 74%, rgba(255, 255, 255, 0.05) 75%, rgba(255, 255, 255, 0.05) 76%, transparent 77%, transparent), linear-gradient(90deg, transparent 24%, rgba(255, 255, 255, 0.05) 25%, rgba(255, 255, 255, 0.05) 26%, transparent 27%, transparent 74%, rgba(255, 255, 255, 0.05) 75%, rgba(255, 255, 255, 0.05) 76%, transparent 77%, transparent);\n  background-size: 50px 50px; }\n  .storm-diagrams-canvas path {\n    stroke: rgba(255, 255, 255, 0.5); }\n  .storm-diagrams-canvas .pointui {\n    fill: rgba(255, 255, 255, 0.5); }\n\n.storm-diagrams-canvas {\n  position: relative;\n  flex-grow: 1;\n  display: flex;\n  cursor: move;\n  overflow: hidden; }\n  .storm-diagrams-canvas .point {\n    fill: rgba(255, 255, 255, 0.5); }\n    .storm-diagrams-canvas .point.selected {\n      fill: #00c0ff; }\n  .storm-diagrams-canvas .selector {\n    position: absolute;\n    background-color: rgba(0, 192, 255, 0.2);\n    border: solid 2px #00c0ff; }\n  .storm-diagrams-canvas svg {\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    transform-origin: 0 0;\n    overflow: visible; }\n  .storm-diagrams-canvas .node-view {\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    position: absolute;\n    pointer-events: none;\n    transform-origin: 0 0; }\n  .storm-diagrams-canvas .node {\n    position: absolute;\n    -webkit-touch-callout: none;\n    /* iOS Safari */\n    -webkit-user-select: none;\n    /* Chrome/Safari/Opera */\n    user-select: none;\n    cursor: move;\n    pointer-events: all; }\n    .storm-diagrams-canvas .node.selected > * {\n      border-color: #00c0ff !important;\n      -webkit-filter: drop-shadow(0 0 20px rgba(0, 192, 255, 0.5)); }\n\n@keyframes dash {\n  from {\n    stroke-dashoffset: 24; }\n  to {\n    stroke-dashoffset: 0; } }\n  .storm-diagrams-canvas path {\n    fill: none;\n    pointer-events: all; }\n    .storm-diagrams-canvas path.selected {\n      stroke: #00c0ff !important;\n      stroke-dasharray: 10,2;\n      animation: dash 1s linear infinite; }\n  .storm-diagrams-canvas .port {\n    width: 15px;\n    height: 15px;\n    background: rgba(255, 255, 255, 0.1); }\n    .storm-diagrams-canvas .port:hover, .storm-diagrams-canvas .port.selected {\n      background: #c0ff00; }\n  .storm-diagrams-canvas .basic-node {\n    background-color: #1e1e1e;\n    border-radius: 5px;\n    font-family: Arial;\n    color: white;\n    border: solid 2px black;\n    overflow: visible;\n    font-size: 11px;\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5); }\n    .storm-diagrams-canvas .basic-node .title {\n      /*\t\t\tbackground-image: linear-gradient(rgba(black,0.1),rgba(black,0.2));*/\n      background: rgba(0, 0, 0, 0.3);\n      display: flex;\n      white-space: nowrap; }\n      .storm-diagrams-canvas .basic-node .title > * {\n        align-self: center; }\n      .storm-diagrams-canvas .basic-node .title .fa {\n        padding: 5px;\n        opacity: 0.2;\n        cursor: pointer; }\n        .storm-diagrams-canvas .basic-node .title .fa:hover {\n          opacity: 1.0; }\n      .storm-diagrams-canvas .basic-node .title .name {\n        flex-grow: 1;\n        padding: 5px 5px; }\n    .storm-diagrams-canvas .basic-node .ports {\n      display: flex;\n      background-image: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)); }\n      .storm-diagrams-canvas .basic-node .ports .in, .storm-diagrams-canvas .basic-node .ports .out {\n        flex-grow: 1;\n        display: flex;\n        flex-direction: column; }\n      .storm-diagrams-canvas .basic-node .ports .in-port, .storm-diagrams-canvas .basic-node .ports .out-port {\n        display: flex;\n        margin-top: 1px; }\n        .storm-diagrams-canvas .basic-node .ports .in-port > *, .storm-diagrams-canvas .basic-node .ports .out-port > * {\n          align-self: center; }\n        .storm-diagrams-canvas .basic-node .ports .in-port .name, .storm-diagrams-canvas .basic-node .ports .out-port .name {\n          padding: 0 5px; }\n      .storm-diagrams-canvas .basic-node .ports .out-port {\n        justify-content: flex-end; }\n        .storm-diagrams-canvas .basic-node .ports .out-port .name {\n          justify-content: flex-end;\n          text-align: right; }\n",""])}])});